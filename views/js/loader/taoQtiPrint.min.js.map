{"version":3,"mappings":"AAUAA,6DAsFAC,WApEA,0BACA,gCACA,eACA,mBAGA,2CACAC,cACAC,6BAEA,YACAD,qCACAA,oCACAA,iCACAA,0BACA,WACAA,mCACAA,iCACAA,0BACA,UACAA,iCACAA,0BAEAA,kBAGA,+BACA,CAEA,iEAEA,2CACA,6BACA,6BACA,6BAEA,CAaA,mDACA,2BACA,yCACA,kBACA,mBACA,oBACA,gBACA,CAsDA,+FACA,yDACA,sGAKA,6FAGA,oDAKA,4BACA,kDACA,CAGA,0BACAE,YACAC,2BAEA,4BACAD,WACA,4DAEAE,gBACAF,4BAEA,CAEA,cACA,CAwSA,6CAIA,OACAG,QAJAC,QACAC,6BAEAC,0CACAH,SAEAI,gBACAC,sBACAL,+BAFAI,gBAIAC,sBACAL,+BALAI,gBAOAC,sBACAL,+BARAI,gBAUAC,sBACAL,wCAIAE,iBAlBAC,IAqBAF,QAIA,kCACA,iCAGA,YACA,CAEA,+BACA,8EACA,2DACA,CAhfA,WAuDAK,sBACAC,2BACA,6BACA,EACAC,uBACA,6CACAC,gCAEA,CACA,EAWAC,oPACA,uZACA,8RACA,oHACA,ugBACA,8aACA,4GACA,2BACA,gEACA,sOACA,0SACA,2XACA,+JACA,yUACA,kEACA,gFACA,ubACA,yFACA,uFACAD,yBACA,IACA,iBACA,SACAA,8DACA,wDACAA,8CACAA,+EACAA,+BACA,qfACAE,6UACA,0FACA,mJACA,gHACA,aAgBA,OAhBAC,yjCACA,oNACA,yFACA,gzBACA,qvBASAlB,SATAmB,iNACA,oDACA,aACAC,8CACA,wCACA,uQACA,gRACA,gRACA,wHACA,qKACA,mEACA,eACA,4GACA,kIACA,8DAIAC,2TACA,gGACA,uIACA,iFACA,wCACAC,ijGACA,wMACA,ybACAC,kXACAC,kDACA,+wBAuBAC,qBAEA,kCACA,YACA,uBACA,EAuCA,MArCAC,0CASA,4BACA,kEACA,mBACAC,qDACA,SACA,IAbAC,0BACAC,aACAC,gCACAC,0CACAC,4CAEA,aASA,sHACAC,iGACAJ,qBAEAI,wFACAA,+FAEA,+BACA,+BACA,4BACA,6CACAC,wEACAD,sBACA,CAGA,EACAP,wCACA,0BACA,wCACA,EACAA,OACA,IAEAS,8DAGAT,4CAkDA,WACA,wBACA,wDACA,oCACA,mCACA,CA8BA,yCACA,cAKA,GAJAU,kBACAA,wBAGA,iCACAC,kCACAC,oBACAF,yBAEAA,aACAA,sBAEA,EACAG,sBACAH,yBAEAA,gBACAA,yBAEA,EAMA,MAJAC,qBACAA,oBACAA,0BACAA,oJAEA,4CACAD,0BACA,yCACAA,sBAEA,CA3DA,yCACAI,kCACAC,uDACAC,qFACA,mDACA,sCACAC,qBACA,IACA,yBACAA,qBACAA,qBACAA,qBACAA,sBAGAF,+BACA,CACA,CA0CA,CASA,kCACA,oBACA,4BAEA,wBACA,gDACA,oCACA,sCACAJ,+BACA,YACA,+CACA,oBACA,4CACA,6BACA,mCACA,oCACA,0BACA,EAyFA,MAlFAX,wDAiCA1B,qBAzBAA,WAPA4C,uBACAC,yBACAjB,yBAEAE,gCACAC,8BACAC,gCACAc,iCACAC,mCAEAH,8BACA,aAEA,+BACA,mCACAI,iCACAC,iBACAC,iBACAL,uEACAA,sBACAA,qEACAA,8CAGAA,qBACA,qBACA,oBACAC,cACAC,eACA,CAEAF,qBACA,oBACA,mBACAC,cACAC,eAEA,CAGA,mBACA,EAKArB,uCACA,kBACAyB,uCAEA,EAOAzB,uCACA,uBACA,EAKAA,mCACA,yEACA,mBACA,EAMAA,gDACA0B,SAIA,4BAHAA,OAIA,EAEA1B,OACA,IA1OA,WACA,kCACA,YACA,uBACA,EA6CA,MAtCAA,0CAQA,OAPAE,0BACAC,aACAC,gCACAC,0CACAC,4CACAqB,+DAEAC,wBACAD,mBAEA,+BACAA,wNAGAA,mBACA,CAEAA,uBACAxB,gCAGA0B,2BACAC,yDACAC,0DAEA,wCACAF,iEAEA,EAKA7B,mCACA,qBACA,EAEAA,OACA,GAwLA,CA4JA,MAhFAgC,6BAiBA,GAhBA,gBACAC,UACAC,WACAC,aACAC,oBACAC,qBACAC,kCACA,EAEA,2BACAC,SACAC,YACA,GAIAD,QACA,qBACA,6BAIA,sBACA5B,gCAGA,wBACAX,mBAGA,4BACA,YACA,mBACA,oDAEA,qBACA,kCAEA,EAOAgC,0CACA,6GACA,6BACA,qBACA,qBACA,mCACA,gBACA,EASAA,sCACA,iFACA,0BAEA,EAKAA,kCACA,sBACA,EAKAA,wCAEAA,MACA,GCtmBA3D,yKAKA,+BAEA,4BAMA,MALAgB,qIACAoD,2EACAA,oHACAC,sCACArD,6BACAA,MACA,CAbA,iCACAsD,6DACA,qGAyBA,MAZAtD,sFACAoD,uEACAA,+GACApD,iCACA,2EACAoD,wEACAA,iHACAC,sCACArD,iBACAqD,oIACAA,sCACArD,mBACAA,MACA,KCPAhB,yDACA,SACA,kCACA,qBACA,aAWA,gDAEAuE,4BACAC,oCAQA,MANAC,+BACAD,gCACAC,qCACAD,sCAGAE,oDACA,CACA,GC/BA1E,2EACA,SACA,OACA,iEACA,iDACA,iCACA,aAOA,2CACA,OACA2E,kBACAC,aACAC,0BACAC,qBACAC,mBACAC,2CACA,yBACAC,oFACA,EACA,CACA,CACA,CAEA,8BACA,GChDAjF,wKAKA,+BAEA,4BAMA,MALAgB,iJACAoD,2EACAA,oHACAC,sCACArD,yCACAA,MACA,CAbA,iCACAsD,6DACA,qGA6BA,MAhBAtD,+EACAoD,uEACAA,+GACApD,iCACA,kBACAoD,yEACAA,iHACApD,iCACA,oIACAoD,wEACAA,iHACAC,sCACArD,yBACAqD,oIACAA,sCACArD,oEACAA,MACA,KCjCAhB,0KAKA,+BAEA,4BAUA,MATAgB,uBACAoD,qEACAA,6GACApD,iCACA,mBACAoD,sEACAA,8GACApD,iCACA,UACAA,MACA,CAjBA,iCACAsD,6DACA,8FAqBA,MAJAtD,kBACAqD,kIACAA,sCACArD,kBACAA,MACA,KCNAhB,0EACA,SACA,SACA,OACA,gEACA,kEACA,iDACA,mDACA,4DACA,aAOA,0CACA,OACA2E,kBACAC,aACAC,0BACAG,2CACA,yBACAL,kBACAM,kIACA,EACA,EACAF,0DAIAG,eAFAC,sCACAC,8CAGA,IACAF,2DACA,UACA,CAEAA,qCACAE,8BACAC,YACAC,+CACAC,8BACA,EACA,GAEA,EACAC,8CACAC,mBACAC,iBACAC,4BACAA,wCAGA,CACA,CACA,CAEA,6BACA,GCvDA3F,yDACA,gDACA,mEACA,kEACA,kDACA,aAOA,iDACA,iEACAA,4CAEA4F,2CACA,CAMA,sCACAC,oCACA,CAMA,qCACAA,mCACA,CAaA,MAVAD,8CAGAE,uCACAA,wCAIAC,uCAEAH,aACA,GCtEA5F,oKAKA,+BAEA,qBAUA,MATAgB,sDACAgF,qKACA,IACAA,wKACA,kCACAA,qKACA,cACAA,wKACA,YACAhF,MACA,CAEA,+BAEA,qBAUA,MATAA,yDACAgF,qKACA,IACAA,wKACA,kCACAA,qKACA,cACAA,wKACA,YACAhF,MACA,CAhCA,iCACAsD,6DACA,qGAkDA,MAlBAtD,0EACAgF,uKACA,qBACA5B,uEACAA,+GACApD,iCACA,YACAqD,oJACAA,sCACArD,uCACAgF,oKACA,IACAA,uKACA,OACA5B,qEACAA,8GACAC,sCACArD,4BACAA,MACA,KChCAhB,sEACA,SACA,4DACA,iDACA,8BACA,aAMA,OACA2E,wBACAE,0BACAD,aACAI,sCAEA,MADAiB,iCACAA,IACA,CACA,CACA,GC1CAjG,+LACA,iCACAsE,6DACA,2FAcA,MAXAtD,uGACAgF,uKACA,qBACA5B,uEACAA,+GACApD,iCACA,OACAoD,qEACAA,8GACAC,sCACArD,gBACAA,MACA,KCIAhB,iGACA,uFACA,iDACA,4BACA,aAMA,OACA2E,mDACAE,0BACAD,YACA,CACA,GCrCA5E,sLAKA,+BAEA,qBAUA,MATAgB,0DACAgF,qKACA,IACAA,wKACA,sBACAA,qKACA,cACAA,wKACA,gBACAhF,MACA,CAEA,+BAEA,qBAUA,MATAA,6DACAgF,qKACA,IACAA,wKACA,sBACAA,qKACA,cACAA,wKACA,gBACAhF,MACA,CAhCA,iCACAsD,6DACA,qGAkDA,MAlBAtD,wEACAgF,uKACA,qBACA5B,uEACAA,+GACApD,iCACA,gBACAqD,oJACAA,sCACArD,2CACAgF,oKACA,IACAA,uKACA,OACA5B,qEACAA,8GACAC,sCACArD,0BACAA,MACA,KChCAhB,wFACA,8EACA,iDACA,4BACA,aAOA,2CACA,YACA,kCAIA,MAHAkG,2EACAC,SAEAA,IACA,CAMA,OACAxB,0CACAE,0BACAD,aACAI,8BAEA,MADAiB,kEACAA,IACA,EACAG,8BACA,4CACA,2CACAC,2CACAC,gCACAC,wCACAD,8CACAC,kDACA,CACA,CACA,CACA,GC1CAvG,wDACA,0BACA,6BACA,+CACA,aAIA,sCACAwG,yBACAA,yBACAA,uBACAA,wBACA,eAKA,OACAlB,qBACAmB,WACA,6DACA,8DACA,+DACA,uDACA,+DACA,iDACA,iEACA,uDACA,oEACA,0FACA,wFACA,sGACA,sGACA,gGACA,iHACA,mIACA,2EACA,mDACA,yDACA,qDAGA,uBACA,sBACA,uBACA,sBACA,iBAGA,oBACA,wBACA,qBACA,mCACA,WACA,OACA,WACA,iDACA,sBACA,sBACA,iBACA,qBACA,uBACA,0BACA,2BACA,oBACA,qBACA,8BACA,UACA,+BACA,qBACA,eACA,wBACA,EACAC,SACAC,yBACA,CACA,CACA,GCrGA3G,yJAKA,+BAEA,4BAMA,MALAgB,sCACAoD,qEACAA,8GACAC,sCACArD,iBACAA,MACA,CAEA,+BAEA,4BAIA,OAHAoD,qEACAA,8GACAC,sCACArD,MACA,CAtBA,iCACAsD,6DACA,sGAsBAD,0TACAA,0BACA,EACA,KCNArE,2HACA,aAMA,OACA2E,sBACAC,YACA,CACA,GCjCA5E,0JAKA,+BAEA,qBAIA,MAHAgB,oBACAgF,yKACA,KACAhF,MACA,CAXA,iCACAsD,6DACA,qGAmBA,MARAtD,uBACAqD,iMACAA,sCACArD,aACAoD,qEACAA,8GACAC,sCACArD,wBACAA,MACA,KCNAhB,4DACA,kDACA,eACA,aAEA,OACA2E,sBACAC,YACA,CACA,GC1BA5E,sJAKA,+BAEA,qBAIA,MAHAgB,qBACAgF,sKACA,KACAhF,MACA,CAEA,+BAEA,qBAIA,MAHAA,oBACAgF,yKACA,KACAhF,MACA,CApBA,iCACAsD,6DACA,qGAkCA,MAdAtD,mCACAoD,uEACAA,+GACApD,iCACA,KACAqD,8LACAA,sCACAA,iMACAA,sCACArD,aACAoD,qEACAA,8GACAC,sCACArD,oBACAA,MACA,KCrBAhB,wDACA,8CACA,iDACA,4BACA,aAEA,OACA2E,kBACAE,0BACAD,aACAwB,2BACAQ,8BACAV,yBACAA,cAEAU,wCACAV,0BAEA,CACA,CACA,GCrCAlG,mJAKA,+BAEA,qBAIA,MAHAgB,kBACAgF,gKACA,KACAhF,MACA,CAEA,+BAEA,qBAIA,MAHAA,qBACAgF,sKACA,KACAhF,MACA,CAEA,+BAEA,qBAIA,MAHAA,sBACAgF,oKACA,KACAhF,MACA,CAEA,+BAEA,qBAIA,MAHAA,qBACAgF,mKACA,KACAhF,MACA,CAtCA,iCACAsD,6DACA,qGA2DA,MArBAtD,qCACAoD,uEACAA,+GACApD,iCACA,6CACAgF,gKACA,iBACAA,gKACA,WACA3B,wLACAA,sCACArD,iBACAqD,8LACAA,sCACArD,iBACAqD,4LACAA,sCACArD,iBACAqD,2LACAA,sCACArD,eACAA,MACA,KCzCAhB,qDACA,2CACA,iDACA,4BACA,aAMA,OACA2E,eACAC,aACAC,yBACA,CACA,GCrCA7E,uJACA,iCACAsE,6DACA,2FAUA,MAPAtD,mDACAgF,iKACA,aACA5B,qEACAA,8GACAC,sCACArD,mBACAA,MACA,KCEAhB,yDACA,+CACA,iDACA,4BACA,aAMA,OACA2E,mBACAC,aACAC,yBACA,CACA,GC/BA7E,8KAKA,+BAEA,yBACAoE,uEACAA,+GACAC,0BACA,EACA,CAEA,+BAGA,mBACA,CAEA,+BAEA,iBACAA,+DACAA,0BACA,EACA,CAzBA,iCACAC,6DACA,2JA4CA,MAnBAtD,yGACAoD,uEACAA,+GACApD,iCACA,mFACAgF,+KACA,cACA3B,gIACAA,sCACArD,gEACAqD,oIACAA,sCACArD,sBACA0F,gFACAtC,4DACAA,oGACAE,yIACAD,sCACArD,gCACAA,MACA,KC1BAhB,gFACA,SACA,sEACA,iDACA,8BACA,aAMA,OACA2E,6BACAC,aACAC,0BACAG,iDACA,yBACA6B,yDACA,EACA,CACA,CACA,GC3CA7G,oLAKA,+BAEA,yBACAoE,uEACAA,+GACAC,0BACA,EACA,CAEA,+BAEA,qBAcA,MAbArD,sBACAqD,sIACAA,sCACArD,sFACAqD,oMACAA,sCACArD,qBACAqD,qIACAA,sCACArD,+BACAqD,oIACAA,sCACArD,iBACAA,MACA,CACA,+BAEA,qBAcA,MAbAA,gEACAgF,oKACA,SACA3B,8LACAA,sCACArD,qBACAgF,wKACA,IACAA,yEACA,MACA3B,iMACAA,sCACArD,iCACAA,MACA,CACA,+BAGA,yBACA,CAEA,+BAEA,qBAIA,MAHAA,sBACAgF,yKACA,KACAhF,MACA,CAEA,+BAEA,oCAUA,MATAA,6GACAgF,0KACA,IACAA,4KACA,IACAA,gLACA,IACAA,4LACA,kCACAhF,MACA,CAEA,gCAEA,oCAYA,MAXAA,6GACAgF,0KACA,KACA5B,0EACAA,kHACApD,iCACA,IACAgF,gLACA,IACAA,oLACA,kCACAhF,MACA,CAEA,gCAEA,oCAYA,MAXAA,6GACAgF,0KACA,KACA5B,yEACAA,iHACApD,iCACA,IACAgF,gLACA,IACAA,oLACA,kCACAhF,MACA,CAEA,gCAEA,qBAmBA,MAlBAA,4DACAgF,oKACA,SACA3B,8LACAA,sCACArD,cACAqD,iMACAA,sCACArD,2CACAqD,sMACAA,sCACArD,qBACAqD,qIACAA,sCACArD,+BACAqD,oIACAA,sCACArD,iBACAA,MACA,CACA,gCAEA,oCAUA,MATAA,6GACAgF,0KACA,IACAA,4KACA,IACAA,gLACA,IACAA,4LACA,kCACAhF,MACA,CArJA,iCACAsD,6DACA,yIAkKA,MAbAtD,+GACAoD,uEACAA,+GACApD,iCACA,2FACAgF,+KACA,gBACA3B,gIACAA,sCACArD,kEACAqD,wJACAA,sCACArD,uBACAA,MACA,KChJAhB,sFACA,SACA,4EACA,iDACA,8BACA,aAQA,yCACA,gCAEA,GAEA8G,QAFAC,yCACAC,+GACA,MAEA,gBACAF,iCACA,+BACAG,uBAEA,MAEA,gBACAH,gCAEA,+BACAG,uBAEA,MAGA,IAEA,EAMA,OACAtC,mCACAC,aACAC,0BACAG,iDACA,4CACAkC,kDACAC,mDACAC,8DACA,yBACAF,yCACAC,4CACAE,0EACA,EACA,CACA,CACA,GClFArH,oLAKA,+BAEA,iBACAqE,+DACAA,0BACA,EACA,CAVA,iCACAC,6DACA,2JAuBA,MAbAtD,6GACAoD,uEACAA,+GACApD,iCACA,kEACA0F,gFACAtC,4DACAA,oGACAE,yIACAD,sCACArD,yDACAgF,+KACA,mBACAhF,MACA,KCLAhB,sFACA,4EACA,iDACA,4BACA,aAMA,OACA2E,mCACAC,aACAC,yBACA,CACA,GCrCA7E,6KAKA,+BAEA,qBAIA,MAHAgB,iBACAgF,gKACA,KACAhF,MACA,CAEA,+BAEA,qBAGA,MAFAA,aACAgF,sKACAhF,MACA,CAEA,+BAEA,yBACAoD,uEACAA,+GACAC,0BACA,EACA,CAEA,+BAEA,iBACAA,+DACAA,0BACA,EACA,CAEA,sCAEA,qBAQA,MAPArD,kCACAqD,+DACAA,sCACArD,qBACAqD,oIACAA,sCACArD,gCACAA,MACA,CACA,gCAGA,uLACA,CAtDA,iCACAsD,6DACA,2JAkFA,MA5BAtD,iBACAqD,wLACAA,sCACArD,6EACAqD,8LACAA,sCACArD,6BACAoD,uEACAA,+GACApD,iCACA,kFACAgF,+KACA,cACA3B,gIACAA,sCACArD,2LACA0F,gFACAtC,8DACAA,sGACAE,2IACAD,sCACArD,+DACA0F,gGACAtC,8DACAA,sGACAE,2JACAD,sCACArD,2GACAA,MACA,KChEAhB,+EACA,qEACA,iDACA,4BACA,aAMA,OACA2E,4BACAC,aACAC,yBACA,CACA,GCrCA7E,mKACA,iCACAsE,6DACA,2FAYA,MATAtD,6FACAoD,uEACAA,+GACApD,iCACA,OACAoD,qEACAA,8GACAC,sCACArD,uBACAA,MACA,KCMAhB,qEACA,2DACA,iDACA,4BACA,YAMA,OACA2E,kBACAC,aACAC,yBACA,CACA,GCrCA7E,iLACA,iCACAsE,6DACA,2FAUA,MAPAtD,0GACAoD,uEACAA,+GACApD,iCACA,mHACAgF,+KACA,mBACAhF,MACA,KCQAhB,mFACA,yEACA,iDACA,4BACA,aAMA,OACA2E,gCACAC,aACAC,yBACA,CACA,GCrCA7E,oJAKA,+BAGA,sBACA,CAEA,+BAEA,qBAGA,MAFAgB,aACAgF,sKACAhF,MACA,CAhBA,iCACAsD,6DACA,qGAiCA,MAjBAtD,yEACAoD,uEACAA,+GACApD,iCACA,wBACAgF,uKACA,gBACA3B,wLACAA,sCACArD,gCACAqD,8LACAA,sCACArD,eACAoD,qEACAA,8GACAC,sCACArD,6BACAA,MACA,KCfAhB,sDACA,4CACA,iDACA,6DACA,kDACA,aAMA,OACA2E,0BACAC,aACAC,0BAKAuB,6BAEAkB,8CACA,CACA,CACA,GC9CAtH,oJAKA,+BAEA,4BAUA,MATAgB,mCACAoD,uEACAA,+GACApD,iCACA,+DACAoD,oEACAA,6GACAC,sCACArD,6BACAA,MACA,CAEA,+BAEA,4BAUA,MATAA,mCACAoD,uEACAA,+GACApD,iCACA,2CACAoD,oEACAA,6GACAC,sCACArD,6BACAA,MACA,CAhCA,iCACAsD,6DACA,0FAgCAD,mJACAA,0BACA,EACA,KChBArE,sDACA,4CACA,iDACA,UACA,oCACA,aAMA,OACA2E,gBACAC,aACAC,0BACAuB,2BACA,sCACAX,mBACA8B,yEACA,KAEA,CACA,CACA,GC7CAvH,sJAKA,+BAEA,qBAeA,MAdAgB,mBACAqD,wLACAA,sCACArD,kBACAgF,kKACA,aACAA,kKACA,MACA3B,2LACAA,sCACArD,YACAqD,4LACAA,sCACArD,6DACAA,MACA,CACA,+BAEA,qBAIA,MAHAA,iBACAgF,gKACA,KACAhF,MACA,CAEA,+BAEA,qBAIA,MAHAA,oBACAgF,mKACA,KACAhF,MACA,CAEA,+BAEA,qBAGA,MAFAA,qBACAgF,oKACAhF,MACA,CAEA,+BAEA,qBASA,MARAA,mBACAqD,wLACAA,sCACArD,kBACAgF,kKACA,aACAA,kKACA,cACAhF,MACA,CAEA,gCAEA,qBAiBA,MAhBAA,oBACAqD,wLACAA,sCACArD,mBACAgF,kKACA,aACAA,kKACA,MACA3B,2LACAA,sCACArD,YACAqD,8LACAA,sCACArD,YACAgF,iKACA,YACAhF,MACA,CACA,gCAEA,qBAIA,MAHAA,qBACAgF,oKACA,KACAhF,MACA,CAEA,gCAEA,qBAeA,MAdAA,oBACAqD,wLACAA,sCACArD,kBACAgF,kKACA,MACA3B,2LACAA,sCACArD,YACAqD,8LACAA,sCACArD,YACAgF,iKACA,YACAhF,MACA,CA/GA,iCACAsD,6DACA,qGAgIA,MAjBAtD,+DACAoD,uEACAA,+GACApD,iCACA,aACAqD,+HACAA,sCACArD,iBACAqD,+HACAA,sCACArD,iBACAqD,kIACAA,sCACArD,iBACAqD,gIACAA,sCACArD,mBACAA,MACA,KC9GAhB,wDACA,8CACA,iDACA,4BACA,aAMA,OACA2E,kBACAC,aACAC,yBACA,CACA,GCrCA7E,2JAKA,+BAEA,4BAYA,MAXAgB,iEACAgF,iKACA,qBACA5B,uEACAA,+GACApD,iCACA,gHACAoD,qEACAA,8GACAC,sCACArD,uCACAA,MACA,CAnBA,iCACAsD,6DACA,0FAmBAD,gIACAA,0BACA,EACA,KCHArE,6DACA,mDACA,kDACA,2BACA,aAMA,OACA2E,uBACAE,0BACAD,aACAI,sCAIA,MAHAwC,oBACAvB,eAEAA,IACA,CACA,CACA,GC3CAjG,0JAKA,+BAEA,qBAIA,MAHAgB,qBACAgF,mKACA,KACAhF,MACA,CAXA,iCACAsD,6DACA,qGAuBA,MAZAtD,8BACAgF,iKACA,kBACAA,iKACA,kDACA5B,uEACAA,+GACApD,iCACA,WACAqD,2LACAA,sCACArD,eACAA,MACA,KCLAhB,4DACA,kDACA,kDACA,2BACA,aAMA,OACA2E,sBACAC,aACAC,yBACA,CACA,GCrCA7E,qJAKA,+BAEA,qBAGA,MAFAgB,aACAgF,sKACAhF,MACA,CAEA,+BAEA,qBAIA,MAHAA,sBACAgF,qKACA,KACAhF,MACA,CAEA,+BAEA,qBAIA,MAHAA,oBACAgF,yKACA,KACAhF,MACA,CA5BA,iCACAsD,6DACA,qGA8CA,MAlBAtD,yCACAqD,8LACAA,sCACArD,gEACAoD,uEACAA,+GACApD,iCACA,WACAqD,6LACAA,sCACArD,iBACAqD,iMACAA,sCACArD,yBACAoD,qEACAA,8GACAC,sCACArD,qBACAA,MACA,KClCAhB,uDACA,6CACA,iDACA,4BACA,aAMA,OACA2E,iBACAE,0BACAD,YACA,CACA,GC/BA5E,+JAKA,+BAEA,4BAMA,MALAgB,qIACAoD,2EACAA,oHACAC,sCACArD,6BACAA,MACA,CAbA,iCACAsD,6DACA,8DAqBA,MARAtD,+HACAoD,wEACAA,iHACAC,sCACArD,iBACAqD,oIACAA,sCACArD,uBACAA,MACA,KCJAhB,+CACA,SACA,OACA,UACA,cACA,eACA,iCACA,kCACA,qCACA,gDACA,iDACA,uDACA,mHACA,aA2BA,sCAUA,MATAyH,sBACAA,iDACAC,uDACAC,oEACA,EACA,uBACAC,iBACA,IAEAH,kBACA,CAQA,yCACA,0BAIA,MAHAI,0CACAC,6BAEAC,oBACA9C,qHACA+C,qBACA,EACA,IArDAC,sDAEAL,iDAMAM,iBACAC,+GACAC,uFACAC,sHACA,EAMAZ,wBAwCA,OAMAa,kCACA,cAEAC,iEACA,qBACA5B,8BACA,EAEAtE,sBACAmG,4CAGAnG,2BACAA,gDAEAA,kDACA,SACA,wEAGAA,wBACAA,gBACA,IACAA,+BACAA,6BAEAoG,MACA,0BACA,UACApG,sDACA,CACA,EACA,EACA,EAOA+D,iCACA,cACA,eACA,IACA,qCACA,gDAEAsC,mCACA,UACAd,gBACAc,+CACArG,0DACA,CACA,IAGAsG,QACAC,MACAD,qCACA,qCACAlD,kGACA,GACA,EACAoD,gBAOA,MAFAxG,2DAEAyG,6BACA,GACAC,oBACA1G,wFACAoG,MACA,EAEA,UACApG,qDACAoG,MACA,CACA,KACAA,OAEA,EAOAO,+BACAP,MACA,EAMAQ,6BACA,QACA,EAMAzD,kCACA,oBAGAC,6DACA,8CACAyD,eACAvD,+BAEA,GAGAD,WACAD,qDACAhB,mEACA0E,+CAEA,GAGA,EAMAC,qCACA,QACA,CACA,CACA,GCxNApJ,wCACA,iCACA,uCACA,yCACA,aASA,MANAqJ,oDAMAA,UACA,GCnCArJ,8IAKA,+BAEA,4BAMA,MALAgB,iBACAoD,uEACAA,+GACApD,iCACA,QACAA,MACA,CAEA,+BAEA,oCAQA,MAPAA,sDACAoD,qEACAA,6GACApD,iCACA,YACAgF,8KACA,oBACAhF,MACA,CAEA,+BAEA,4BAMA,MALAA,iBACAoD,sEACAA,8GACApD,iCACA,QACAA,MACA,CAEA,+BAEA,4BAMA,MALAA,iBACAoD,yEACAA,iHACApD,iCACA,QACAA,MACA,CAEA,+BAEA,4BAMA,MALAA,iBACAoD,qEACAA,6GACApD,iCACA,QACAA,MACA,CAEA,gCAGA,qCACA,CAjEA,iCACAsD,6DACA,kIA6EA,MAZAD,iIACAA,sCACAA,8HACAA,sCACAA,+HACAA,sCACAA,kIACAA,sCACAA,8HACAA,sCACAA,kIACAA,sCACArD,MACA,KCjFAhB,iJAKA,+BAEA,qBAKA,MAJAgB,mBACAqD,+DACAA,sCACArD,mBACAA,MACA,CAZA,iCACAsD,6DACA,qGAmBA,MAPAtD,iBACAoD,sEACAA,8GACApD,iCACA,UACAqD,oIACAA,sCACArD,MACA,KCvBAhB,+IACA,iCACAsE,6DACA,2FAQA,MALAtD,uCACAoD,qEACAA,6GACApD,iCACA,gBACAA,MACA,KCSAhB,2CACA,SACA,SACA,WACA,gCACA,6BACA,yBACA,sCACA,yCACA,uCACA,sFACA,aAMA,OAQAsJ,yDACA,qDAaA,GAXAC,EACAC,aACAC,yCACAC,2DACAC,gCACAC,yCACAC,yCACAC,oDACA,GACA,sBAEAC,0BACA,WACAA,+BACAC,qEACA,4CACA7F,4DACAP,UACAC,WACAE,oBACAC,qBACAC,kCACA,EACA,CAEAwE,MACA,EAQAwB,0DACAV,EACAW,gBACAT,oBACAU,+BACA,GACA,sBAEA1B,MACA,EAUA2B,kEAcA,uBACAC,SACAA,UACA5B,UAEA,IAlBAZ,mBACAyC,sBACAC,QACAC,iBACAR,qDACAS,QACAC,YACA,eACAL,UAYAhB,4BACAsB,0BACAC,qDACA,GACAC,yBACAC,aACA,GACAD,qBACAE,uCACA,yBAEA,uBACA,GACAF,sBACAC,UACA,GACAR,OACA,CACA,CACAhF,qBACA0F,qCACA9B,aACA+B,yCACA,yBACA,0CACA,GACA,SACA,gBAEA,CACA,EACAzE,yBACAA,yBACAA,wBACA,CACA,CACA+D,eACA,EACA,CACAjC,MACA,CACA,CACA,GCjJAtI,wCACA,SACA,SACA,QACA,kBACA,mCACA,uCACA,YACAyF,EACAyF,SACAC,WACAC,cACAC,cACA,aAgBA,0EASA,0BACA,4CAEA,MADAlG,+BACAmG,UACA,IAXAnG,YADAoG,0CAcA,oBACA,+CAsBA,MAnBA9F,8BACA+F,mCAGA/F,mDACA,mBACA,oEAEA,wBACA,gEAEA,yBACA,gEAEA,GAKA0F,YAWA/E,+BACA/D,WACAoJ,uBAGA/C,+CAMAvD,WADAuD,iBACAA,IAEAa,OAEApE,mBAGAuB,2BACAvB,6CAKAM,sDACAiG,kCACAC,+BACAC,iCAEAL,0BACAE,mBACAhG,uEACA,CAGAA,gDACAA,8CACAgG,mBACAhG,mEACA,CAEAA,0CACA+E,0BACAO,4BAEAP,wBACAA,2BAEA9D,gBACA8D,2BAEA9D,kDACA8D,gCAGA9D,mEACA8D,mCAEAiB,mBACAhG,iFACA,CAEA,EACA,EACA,EACA,GAGAyF,4DACAW,KACAxJ,yEAOAA,uBAOAA,qBACA,GAEA,MAjFAA,yGAkFA,EAQA2G,uBAUA,MARA7D,oBAMA,sBAEA,IACA,CACA,EACA,EAEA,wBACA,GClNAnF,6DACAA,MCFA","names":["define","Math","byteArray","code","android","sAgent","aMat","nLimit","nType","length","i","nCorrectLevel","QRErrorCorrectLevel","QR8bitByte","getLength","write","buffer","QRCodeModel","offset","QRMode","moduleCount","dark","QRPolynomial","QRRSBlock","QRBitBuffer","bit","svgDrawer","Drawing","attrs","_htOption","_el","nCount","nWidth","nHeight","svg","child","useSVG","self","el","fOnError","fOnSuccess","factor","drawImage","CanvasRenderingContext2D","arguments","_elImage","_oContext","nRoundedWidth","nRoundedHeight","bIsDark","nLeft","nTop","_safeSetDataURI","nNumber","aHTML","row","elTable","nLeftMarginTable","nTopMarginTable","QRCode","width","height","typeNumber","colorDark","colorLight","correctLevel","vOption","text","helper","stack1","helpers","serial","selector","Element","$scope","qtiClass","template","getContainer","resetResponse","setResponse","getData","message","responseValue","$container","$responses","responses","name","value","setState","_","state","interaction","defaultConfig","applyRenderer","defineNotSupported","defineRawResponse","escapeExpression","data","$img","flag","render","imgSrc","$label","$qtiBlock","assetStrategies","locations","options","assetManager","$figure","horizontal","result","regexChar","regexWords","parseInt","maxWords","maxLength","expectedLength","attributes","itemStylesheetHandler","MathJax","rubric","QtiRendererPromise","require","resolve","logger","item","label","notYetSupportedTpl","additional","timeout","rendererModules","results","booklet","bubbleSheet","init","getQtiRenderer","rendererOptions","done","elt","Promise","race","then","userModules","catch","clear","getState","id","element","getResponses","itemRunner","testPage","$","pageTestTpl","title","subtitle","qrcode","logo","date","uniqid","coverPageOptions","urlHelper","sectionPage","pageSectionTpl","rubricBlock","itemPage","isDone","assets","baseUrl","itemRef","uri","lang","renderer","showResponseIdentifier","on","itemDone","itemState","handle","found","asyncLib","eventifier","testRenderers","pageBlockTpl","$pageBlock","layoutOptions","testDefinitions","pageRenderers","testData","items","states","err"],"sources":["../lib/qrcode.js","../qtiPrintRenderer/tpl/interactions/notSupported!tpl","../qtiPrintRenderer/helpers/container.js","../qtiPrintRenderer/renderers/interactions/NotSupported.js","../qtiPrintRenderer/tpl/interactions/rawResponse!tpl","../qtiPrintRenderer/tpl/interactions/responsesList!tpl","../qtiPrintRenderer/renderers/interactions/RawResponse.js","../qtiCommonRenderer/renderers/config.js","../qtiPrintRenderer/tpl/choices/inlineChoice!tpl","../qtiPrintRenderer/renderers/choices/InlineChoice.js","../qtiPrintRenderer/tpl/choices/simpleAssociableChoice.matchInteraction!tpl","../qtiPrintRenderer/renderers/choices/SimpleAssociableChoice.MatchInteraction.js","../qtiPrintRenderer/tpl/choices/simpleChoice.choiceInteraction!tpl","../qtiPrintRenderer/renderers/choices/SimpleChoice.ChoiceInteraction.js","../qtiPrintRenderer/renderers/config.js","../qtiPrintRenderer/tpl/container!tpl","../qtiPrintRenderer/renderers/Container.js","../qtiPrintRenderer/tpl/figcaption!tpl","../qtiPrintRenderer/renderers/Figcaption.js","../qtiPrintRenderer/tpl/figure!tpl","../qtiPrintRenderer/renderers/Figure.js","../qtiPrintRenderer/tpl/img!tpl","../qtiPrintRenderer/renderers/Img.js","../qtiPrintRenderer/tpl/include!tpl","../qtiPrintRenderer/renderers/Include.js","../qtiPrintRenderer/tpl/interactions/choiceInteraction!tpl","../qtiPrintRenderer/renderers/interactions/ChoiceInteraction.js","../qtiPrintRenderer/tpl/interactions/extendedTextInteraction!tpl","../qtiPrintRenderer/renderers/interactions/ExtendedTextInteraction.js","../qtiPrintRenderer/tpl/interactions/inlineChoiceInteraction!tpl","../qtiPrintRenderer/renderers/interactions/InlineChoiceInteraction.js","../qtiPrintRenderer/tpl/interactions/matchInteraction!tpl","../qtiPrintRenderer/renderers/interactions/MatchInteraction.js","../qtiPrintRenderer/tpl/interactions/prompt!tpl","../qtiPrintRenderer/renderers/interactions/Prompt.js","../qtiPrintRenderer/tpl/interactions/textEntryInteraction!tpl","../qtiPrintRenderer/renderers/interactions/TextEntryInteraction.js","../qtiPrintRenderer/tpl/item!tpl","../qtiPrintRenderer/renderers/Item.js","../qtiPrintRenderer/tpl/math!tpl","../qtiPrintRenderer/renderers/Math.js","../qtiPrintRenderer/tpl/object!tpl","../qtiPrintRenderer/renderers/Object.js","../qtiPrintRenderer/tpl/rubricBlock!tpl","../qtiPrintRenderer/renderers/RubricBlock.js","../qtiPrintRenderer/tpl/stylesheet!tpl","../qtiPrintRenderer/renderers/Stylesheet.js","../qtiPrintRenderer/tpl/table!tpl","../qtiPrintRenderer/renderers/Table.js","../qtiPrintRenderer/tpl/notYetSupported!tpl","../runner/provider/qtiprint.js","../runner/itemRunner.js","../runner/tpl/pageTest!tpl","../runner/tpl/pageSection!tpl","../runner/tpl/pageBlock!tpl","../runner/testRenderers.js","../runner/testRunner.js","module-create.js","/github/workspace/tao/views/build/config-wrap-end-default.js"],"sourcesContent":["/**\n * @fileoverview\n * - Using the 'QRCode for Javascript library'\n * - Fixed dataset of 'QRCode for Javascript library' for support full-spec.\n * - this library has no dependencies.\n * \n * @author davidshimjs\n * @see <a href=\"http://www.d-project.com/\" target=\"_blank\">http://www.d-project.com/</a>\n * @see <a href=\"http://jeromeetienne.github.com/jquery-qrcode/\" target=\"_blank\">http://jeromeetienne.github.com/jquery-qrcode/</a>\n */\n define('taoQtiPrint/lib/qrcode',[], function(){\nvar QRCode;\n\n\t//---------------------------------------------------------------------\n\t// QRCode for JavaScript\n\t//\n\t// Copyright (c) 2009 Kazuhiko Arase\n\t//\n\t// URL: http://www.d-project.com/\n\t//\n\t// Licensed under the MIT license:\n\t//   http://www.opensource.org/licenses/mit-license.php\n\t//\n\t// The word \"QR Code\" is registered trademark of \n\t// DENSO WAVE INCORPORATED\n\t//   http://www.denso-wave.com/qrcode/faqpatent-e.html\n\t//\n\t//---------------------------------------------------------------------\n\tfunction QR8bitByte(data) {\n\t\tthis.mode = QRMode.MODE_8BIT_BYTE;\n\t\tthis.data = data;\n\t\tthis.parsedData = [];\n\n\t\t// Added to support UTF-8 Characters\n\t\tfor (var i = 0, l = this.data.length; i < l; i++) {\n\t\t\tvar byteArray = [];\n\t\t\tvar code = this.data.charCodeAt(i);\n\n\t\t\tif (code > 0x10000) {\n\t\t\t\tbyteArray[0] = 0xF0 | ((code & 0x1C0000) >>> 18);\n\t\t\t\tbyteArray[1] = 0x80 | ((code & 0x3F000) >>> 12);\n\t\t\t\tbyteArray[2] = 0x80 | ((code & 0xFC0) >>> 6);\n\t\t\t\tbyteArray[3] = 0x80 | (code & 0x3F);\n\t\t\t} else if (code > 0x800) {\n\t\t\t\tbyteArray[0] = 0xE0 | ((code & 0xF000) >>> 12);\n\t\t\t\tbyteArray[1] = 0x80 | ((code & 0xFC0) >>> 6);\n\t\t\t\tbyteArray[2] = 0x80 | (code & 0x3F);\n\t\t\t} else if (code > 0x80) {\n\t\t\t\tbyteArray[0] = 0xC0 | ((code & 0x7C0) >>> 6);\n\t\t\t\tbyteArray[1] = 0x80 | (code & 0x3F);\n\t\t\t} else {\n\t\t\t\tbyteArray[0] = code;\n\t\t\t}\n\n\t\t\tthis.parsedData.push(byteArray);\n\t\t}\n\n\t\tthis.parsedData = Array.prototype.concat.apply([], this.parsedData);\n\n\t\tif (this.parsedData.length != this.data.length) {\n\t\t\tthis.parsedData.unshift(191);\n\t\t\tthis.parsedData.unshift(187);\n\t\t\tthis.parsedData.unshift(239);\n\t\t}\n\t}\n\n\tQR8bitByte.prototype = {\n\t\tgetLength: function (buffer) {\n\t\t\treturn this.parsedData.length;\n\t\t},\n\t\twrite: function (buffer) {\n\t\t\tfor (var i = 0, l = this.parsedData.length; i < l; i++) {\n\t\t\t\tbuffer.put(this.parsedData[i], 8);\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction QRCodeModel(typeNumber, errorCorrectLevel) {\n\t\tthis.typeNumber = typeNumber;\n\t\tthis.errorCorrectLevel = errorCorrectLevel;\n\t\tthis.modules = null;\n\t\tthis.moduleCount = 0;\n\t\tthis.dataCache = null;\n\t\tthis.dataList = [];\n\t}\n\n\tQRCodeModel.prototype={addData:function(data){var newData=new QR8bitByte(data);this.dataList.push(newData);this.dataCache=null;},isDark:function(row,col){if(row<0||this.moduleCount<=row||col<0||this.moduleCount<=col){throw new Error(row+\",\"+col);}\n\treturn this.modules[row][col];},getModuleCount:function(){return this.moduleCount;},make:function(){this.makeImpl(false,this.getBestMaskPattern());},makeImpl:function(test,maskPattern){this.moduleCount=this.typeNumber*4+17;this.modules=new Array(this.moduleCount);for(var row=0;row<this.moduleCount;row++){this.modules[row]=new Array(this.moduleCount);for(var col=0;col<this.moduleCount;col++){this.modules[row][col]=null;}}\n\tthis.setupPositionProbePattern(0,0);this.setupPositionProbePattern(this.moduleCount-7,0);this.setupPositionProbePattern(0,this.moduleCount-7);this.setupPositionAdjustPattern();this.setupTimingPattern();this.setupTypeInfo(test,maskPattern);if(this.typeNumber>=7){this.setupTypeNumber(test);}\n\tif(this.dataCache==null){this.dataCache=QRCodeModel.createData(this.typeNumber,this.errorCorrectLevel,this.dataList);}\n\tthis.mapData(this.dataCache,maskPattern);},setupPositionProbePattern:function(row,col){for(var r=-1;r<=7;r++){if(row+r<=-1||this.moduleCount<=row+r)continue;for(var c=-1;c<=7;c++){if(col+c<=-1||this.moduleCount<=col+c)continue;if((0<=r&&r<=6&&(c==0||c==6))||(0<=c&&c<=6&&(r==0||r==6))||(2<=r&&r<=4&&2<=c&&c<=4)){this.modules[row+r][col+c]=true;}else{this.modules[row+r][col+c]=false;}}}},getBestMaskPattern:function(){var minLostPoint=0;var pattern=0;for(var i=0;i<8;i++){this.makeImpl(true,i);var lostPoint=QRUtil.getLostPoint(this);if(i==0||minLostPoint>lostPoint){minLostPoint=lostPoint;pattern=i;}}\n\treturn pattern;},createMovieClip:function(target_mc,instance_name,depth){var qr_mc=target_mc.createEmptyMovieClip(instance_name,depth);var cs=1;this.make();for(var row=0;row<this.modules.length;row++){var y=row*cs;for(var col=0;col<this.modules[row].length;col++){var x=col*cs;var dark=this.modules[row][col];if(dark){qr_mc.beginFill(0,100);qr_mc.moveTo(x,y);qr_mc.lineTo(x+cs,y);qr_mc.lineTo(x+cs,y+cs);qr_mc.lineTo(x,y+cs);qr_mc.endFill();}}}\n\treturn qr_mc;},setupTimingPattern:function(){for(var r=8;r<this.moduleCount-8;r++){if(this.modules[r][6]!=null){continue;}\n\tthis.modules[r][6]=(r%2==0);}\n\tfor(var c=8;c<this.moduleCount-8;c++){if(this.modules[6][c]!=null){continue;}\n\tthis.modules[6][c]=(c%2==0);}},setupPositionAdjustPattern:function(){var pos=QRUtil.getPatternPosition(this.typeNumber);for(var i=0;i<pos.length;i++){for(var j=0;j<pos.length;j++){var row=pos[i];var col=pos[j];if(this.modules[row][col]!=null){continue;}\n\tfor(var r=-2;r<=2;r++){for(var c=-2;c<=2;c++){if(r==-2||r==2||c==-2||c==2||(r==0&&c==0)){this.modules[row+r][col+c]=true;}else{this.modules[row+r][col+c]=false;}}}}}},setupTypeNumber:function(test){var bits=QRUtil.getBCHTypeNumber(this.typeNumber);for(var i=0;i<18;i++){var mod=(!test&&((bits>>i)&1)==1);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=mod;}\n\tfor(var i=0;i<18;i++){var mod=(!test&&((bits>>i)&1)==1);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=mod;}},setupTypeInfo:function(test,maskPattern){var data=(this.errorCorrectLevel<<3)|maskPattern;var bits=QRUtil.getBCHTypeInfo(data);for(var i=0;i<15;i++){var mod=(!test&&((bits>>i)&1)==1);if(i<6){this.modules[i][8]=mod;}else if(i<8){this.modules[i+1][8]=mod;}else{this.modules[this.moduleCount-15+i][8]=mod;}}\n\tfor(var i=0;i<15;i++){var mod=(!test&&((bits>>i)&1)==1);if(i<8){this.modules[8][this.moduleCount-i-1]=mod;}else if(i<9){this.modules[8][15-i-1+1]=mod;}else{this.modules[8][15-i-1]=mod;}}\n\tthis.modules[this.moduleCount-8][8]=(!test);},mapData:function(data,maskPattern){var inc=-1;var row=this.moduleCount-1;var bitIndex=7;var byteIndex=0;for(var col=this.moduleCount-1;col>0;col-=2){if(col==6)col--;while(true){for(var c=0;c<2;c++){if(this.modules[row][col-c]==null){var dark=false;if(byteIndex<data.length){dark=(((data[byteIndex]>>>bitIndex)&1)==1);}\n\tvar mask=QRUtil.getMask(maskPattern,row,col-c);if(mask){dark=!dark;}\n\tthis.modules[row][col-c]=dark;bitIndex--;if(bitIndex==-1){byteIndex++;bitIndex=7;}}}\n\trow+=inc;if(row<0||this.moduleCount<=row){row-=inc;inc=-inc;break;}}}}};QRCodeModel.PAD0=0xEC;QRCodeModel.PAD1=0x11;QRCodeModel.createData=function(typeNumber,errorCorrectLevel,dataList){var rsBlocks=QRRSBlock.getRSBlocks(typeNumber,errorCorrectLevel);var buffer=new QRBitBuffer();for(var i=0;i<dataList.length;i++){var data=dataList[i];buffer.put(data.mode,4);buffer.put(data.getLength(),QRUtil.getLengthInBits(data.mode,typeNumber));data.write(buffer);}\n\tvar totalDataCount=0;for(var i=0;i<rsBlocks.length;i++){totalDataCount+=rsBlocks[i].dataCount;}\n\tif(buffer.getLengthInBits()>totalDataCount*8){throw new Error(\"code length overflow. (\"\n\t+buffer.getLengthInBits()\n\t+\">\"\n\t+totalDataCount*8\n\t+\")\");}\n\tif(buffer.getLengthInBits()+4<=totalDataCount*8){buffer.put(0,4);}\n\twhile(buffer.getLengthInBits()%8!=0){buffer.putBit(false);}\n\twhile(true){if(buffer.getLengthInBits()>=totalDataCount*8){break;}\n\tbuffer.put(QRCodeModel.PAD0,8);if(buffer.getLengthInBits()>=totalDataCount*8){break;}\n\tbuffer.put(QRCodeModel.PAD1,8);}\n\treturn QRCodeModel.createBytes(buffer,rsBlocks);};QRCodeModel.createBytes=function(buffer,rsBlocks){var offset=0;var maxDcCount=0;var maxEcCount=0;var dcdata=new Array(rsBlocks.length);var ecdata=new Array(rsBlocks.length);for(var r=0;r<rsBlocks.length;r++){var dcCount=rsBlocks[r].dataCount;var ecCount=rsBlocks[r].totalCount-dcCount;maxDcCount=Math.max(maxDcCount,dcCount);maxEcCount=Math.max(maxEcCount,ecCount);dcdata[r]=new Array(dcCount);for(var i=0;i<dcdata[r].length;i++){dcdata[r][i]=0xff&buffer.buffer[i+offset];}\n\toffset+=dcCount;var rsPoly=QRUtil.getErrorCorrectPolynomial(ecCount);var rawPoly=new QRPolynomial(dcdata[r],rsPoly.getLength()-1);var modPoly=rawPoly.mod(rsPoly);ecdata[r]=new Array(rsPoly.getLength()-1);for(var i=0;i<ecdata[r].length;i++){var modIndex=i+modPoly.getLength()-ecdata[r].length;ecdata[r][i]=(modIndex>=0)?modPoly.get(modIndex):0;}}\n\tvar totalCodeCount=0;for(var i=0;i<rsBlocks.length;i++){totalCodeCount+=rsBlocks[i].totalCount;}\n\tvar data=new Array(totalCodeCount);var index=0;for(var i=0;i<maxDcCount;i++){for(var r=0;r<rsBlocks.length;r++){if(i<dcdata[r].length){data[index++]=dcdata[r][i];}}}\n\tfor(var i=0;i<maxEcCount;i++){for(var r=0;r<rsBlocks.length;r++){if(i<ecdata[r].length){data[index++]=ecdata[r][i];}}}\n\treturn data;};var QRMode={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3};var QRErrorCorrectLevel={L:1,M:0,Q:3,H:2};var QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:(1<<10)|(1<<8)|(1<<5)|(1<<4)|(1<<2)|(1<<1)|(1<<0),G18:(1<<12)|(1<<11)|(1<<10)|(1<<9)|(1<<8)|(1<<5)|(1<<2)|(1<<0),G15_MASK:(1<<14)|(1<<12)|(1<<10)|(1<<4)|(1<<1),getBCHTypeInfo:function(data){var d=data<<10;while(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)>=0){d^=(QRUtil.G15<<(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)));}\n\treturn((data<<10)|d)^QRUtil.G15_MASK;},getBCHTypeNumber:function(data){var d=data<<12;while(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)>=0){d^=(QRUtil.G18<<(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)));}\n\treturn(data<<12)|d;},getBCHDigit:function(data){var digit=0;while(data!=0){digit++;data>>>=1;}\n\treturn digit;},getPatternPosition:function(typeNumber){return QRUtil.PATTERN_POSITION_TABLE[typeNumber-1];},getMask:function(maskPattern,i,j){switch(maskPattern){case QRMaskPattern.PATTERN000:return(i+j)%2==0;case QRMaskPattern.PATTERN001:return i%2==0;case QRMaskPattern.PATTERN010:return j%3==0;case QRMaskPattern.PATTERN011:return(i+j)%3==0;case QRMaskPattern.PATTERN100:return(Math.floor(i/2)+Math.floor(j/3))%2==0;case QRMaskPattern.PATTERN101:return(i*j)%2+(i*j)%3==0;case QRMaskPattern.PATTERN110:return((i*j)%2+(i*j)%3)%2==0;case QRMaskPattern.PATTERN111:return((i*j)%3+(i+j)%2)%2==0;default:throw new Error(\"bad maskPattern:\"+maskPattern);}},getErrorCorrectPolynomial:function(errorCorrectLength){var a=new QRPolynomial([1],0);for(var i=0;i<errorCorrectLength;i++){a=a.multiply(new QRPolynomial([1,QRMath.gexp(i)],0));}\n\treturn a;},getLengthInBits:function(mode,type){if(1<=type&&type<10){switch(mode){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:return 8;case QRMode.MODE_KANJI:return 8;default:throw new Error(\"mode:\"+mode);}}else if(type<27){switch(mode){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw new Error(\"mode:\"+mode);}}else if(type<41){switch(mode){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw new Error(\"mode:\"+mode);}}else{throw new Error(\"type:\"+type);}},getLostPoint:function(qrCode){var moduleCount=qrCode.getModuleCount();var lostPoint=0;for(var row=0;row<moduleCount;row++){for(var col=0;col<moduleCount;col++){var sameCount=0;var dark=qrCode.isDark(row,col);for(var r=-1;r<=1;r++){if(row+r<0||moduleCount<=row+r){continue;}\n\tfor(var c=-1;c<=1;c++){if(col+c<0||moduleCount<=col+c){continue;}\n\tif(r==0&&c==0){continue;}\n\tif(dark==qrCode.isDark(row+r,col+c)){sameCount++;}}}\n\tif(sameCount>5){lostPoint+=(3+sameCount-5);}}}\n\tfor(var row=0;row<moduleCount-1;row++){for(var col=0;col<moduleCount-1;col++){var count=0;if(qrCode.isDark(row,col))count++;if(qrCode.isDark(row+1,col))count++;if(qrCode.isDark(row,col+1))count++;if(qrCode.isDark(row+1,col+1))count++;if(count==0||count==4){lostPoint+=3;}}}\n\tfor(var row=0;row<moduleCount;row++){for(var col=0;col<moduleCount-6;col++){if(qrCode.isDark(row,col)&&!qrCode.isDark(row,col+1)&&qrCode.isDark(row,col+2)&&qrCode.isDark(row,col+3)&&qrCode.isDark(row,col+4)&&!qrCode.isDark(row,col+5)&&qrCode.isDark(row,col+6)){lostPoint+=40;}}}\n\tfor(var col=0;col<moduleCount;col++){for(var row=0;row<moduleCount-6;row++){if(qrCode.isDark(row,col)&&!qrCode.isDark(row+1,col)&&qrCode.isDark(row+2,col)&&qrCode.isDark(row+3,col)&&qrCode.isDark(row+4,col)&&!qrCode.isDark(row+5,col)&&qrCode.isDark(row+6,col)){lostPoint+=40;}}}\n\tvar darkCount=0;for(var col=0;col<moduleCount;col++){for(var row=0;row<moduleCount;row++){if(qrCode.isDark(row,col)){darkCount++;}}}\n\tvar ratio=Math.abs(100*darkCount/moduleCount/moduleCount-50)/5;lostPoint+=ratio*10;return lostPoint;}};var QRMath={glog:function(n){if(n<1){throw new Error(\"glog(\"+n+\")\");}\n\treturn QRMath.LOG_TABLE[n];},gexp:function(n){while(n<0){n+=255;}\n\twhile(n>=256){n-=255;}\n\treturn QRMath.EXP_TABLE[n];},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var i=0;i<8;i++){QRMath.EXP_TABLE[i]=1<<i;}\n\tfor(var i=8;i<256;i++){QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8];}\n\tfor(var i=0;i<255;i++){QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i;}\n\tfunction QRPolynomial(num,shift){if(num.length==undefined){throw new Error(num.length+\"/\"+shift);}\n\tvar offset=0;while(offset<num.length&&num[offset]==0){offset++;}\n\tthis.num=new Array(num.length-offset+shift);for(var i=0;i<num.length-offset;i++){this.num[i]=num[i+offset];}}\n\tQRPolynomial.prototype={get:function(index){return this.num[index];},getLength:function(){return this.num.length;},multiply:function(e){var num=new Array(this.getLength()+e.getLength()-1);for(var i=0;i<this.getLength();i++){for(var j=0;j<e.getLength();j++){num[i+j]^=QRMath.gexp(QRMath.glog(this.get(i))+QRMath.glog(e.get(j)));}}\n\treturn new QRPolynomial(num,0);},mod:function(e){if(this.getLength()-e.getLength()<0){return this;}\n\tvar ratio=QRMath.glog(this.get(0))-QRMath.glog(e.get(0));var num=new Array(this.getLength());for(var i=0;i<this.getLength();i++){num[i]=this.get(i);}\n\tfor(var i=0;i<e.getLength();i++){num[i]^=QRMath.gexp(QRMath.glog(e.get(i))+ratio);}\n\treturn new QRPolynomial(num,0).mod(e);}};function QRRSBlock(totalCount,dataCount){this.totalCount=totalCount;this.dataCount=dataCount;}\n\tQRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];QRRSBlock.getRSBlocks=function(typeNumber,errorCorrectLevel){var rsBlock=QRRSBlock.getRsBlockTable(typeNumber,errorCorrectLevel);if(rsBlock==undefined){throw new Error(\"bad rs block @ typeNumber:\"+typeNumber+\"/errorCorrectLevel:\"+errorCorrectLevel);}\n\tvar length=rsBlock.length/3;var list=[];for(var i=0;i<length;i++){var count=rsBlock[i*3+0];var totalCount=rsBlock[i*3+1];var dataCount=rsBlock[i*3+2];for(var j=0;j<count;j++){list.push(new QRRSBlock(totalCount,dataCount));}}\n\treturn list;};QRRSBlock.getRsBlockTable=function(typeNumber,errorCorrectLevel){switch(errorCorrectLevel){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+3];default:return undefined;}};function QRBitBuffer(){this.buffer=[];this.length=0;}\n\tQRBitBuffer.prototype={get:function(index){var bufIndex=Math.floor(index/8);return((this.buffer[bufIndex]>>>(7-index%8))&1)==1;},put:function(num,length){for(var i=0;i<length;i++){this.putBit(((num>>>(length-i-1))&1)==1);}},getLengthInBits:function(){return this.length;},putBit:function(bit){var bufIndex=Math.floor(this.length/8);if(this.buffer.length<=bufIndex){this.buffer.push(0);}\n\tif(bit){this.buffer[bufIndex]|=(0x80>>>(this.length%8));}\n\tthis.length++;}};var QRCodeLimitLength=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];\n\t\n\tfunction _isSupportCanvas() {\n\t\treturn typeof CanvasRenderingContext2D != \"undefined\";\n\t}\n\t\n\t// android 2.x doesn't support Data-URI spec\n\tfunction _getAndroid() {\n\t\tvar android = false;\n\t\tvar sAgent = navigator.userAgent;\n\t\t\n\t\tif (/android/i.test(sAgent)) { // android\n\t\t\tandroid = true;\n\t\t\tvar aMat = sAgent.toString().match(/android ([0-9]\\.[0-9])/i);\n\t\t\t\n\t\t\tif (aMat && aMat[1]) {\n\t\t\t\tandroid = parseFloat(aMat[1]);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn android;\n\t}\n\t\n\tvar svgDrawer = (function() {\n\n\t\tvar Drawing = function (el, htOption) {\n\t\t\tthis._el = el;\n\t\t\tthis._htOption = htOption;\n\t\t};\n\n\t\tDrawing.prototype.draw = function (oQRCode) {\n\t\t\tvar _htOption = this._htOption;\n\t\t\tvar _el = this._el;\n\t\t\tvar nCount = oQRCode.getModuleCount();\n\t\t\tvar nWidth = Math.floor(_htOption.width / nCount);\n\t\t\tvar nHeight = Math.floor(_htOption.height / nCount);\n\n\t\t\tthis.clear();\n\n\t\t\tfunction makeSVG(tag, attrs) {\n\t\t\t\tvar el = document.createElementNS('http://www.w3.org/2000/svg', tag);\n\t\t\t\tfor (var k in attrs)\n\t\t\t\t\tif (attrs.hasOwnProperty(k)) el.setAttribute(k, attrs[k]);\n\t\t\t\treturn el;\n\t\t\t}\n\n\t\t\tvar svg = makeSVG(\"svg\" , {'viewBox': '0 0 ' + String(nCount) + \" \" + String(nCount), 'width': '100%', 'height': '100%', 'fill': _htOption.colorLight});\n\t\t\tsvg.setAttributeNS(\"http://www.w3.org/2000/xmlns/\", \"xmlns:xlink\", \"http://www.w3.org/1999/xlink\");\n\t\t\t_el.appendChild(svg);\n\n\t\t\tsvg.appendChild(makeSVG(\"rect\", {\"fill\": _htOption.colorLight, \"width\": \"100%\", \"height\": \"100%\"}));\n\t\t\tsvg.appendChild(makeSVG(\"rect\", {\"fill\": _htOption.colorDark, \"width\": \"1\", \"height\": \"1\", \"id\": \"template\"}));\n\n\t\t\tfor (var row = 0; row < nCount; row++) {\n\t\t\t\tfor (var col = 0; col < nCount; col++) {\n\t\t\t\t\tif (oQRCode.isDark(row, col)) {\n\t\t\t\t\t\tvar child = makeSVG(\"use\", {\"x\": String(row), \"y\": String(col)});\n\t\t\t\t\t\tchild.setAttributeNS(\"http://www.w3.org/1999/xlink\", \"href\", \"#template\")\n\t\t\t\t\t\tsvg.appendChild(child);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tDrawing.prototype.clear = function () {\n\t\t\twhile (this._el.hasChildNodes())\n\t\t\t\tthis._el.removeChild(this._el.lastChild);\n\t\t};\n\t\treturn Drawing;\n\t})();\n\n\tvar useSVG = document.documentElement.tagName.toLowerCase() === \"svg\";\n\n\t// Drawing in DOM by using Table tag\n\tvar Drawing = useSVG ? svgDrawer : !_isSupportCanvas() ? (function () {\n\t\tvar Drawing = function (el, htOption) {\n\t\t\tthis._el = el;\n\t\t\tthis._htOption = htOption;\n\t\t};\n\t\t\t\n\t\t/**\n\t\t * Draw the QRCode\n\t\t * \n\t\t * @param {QRCode} oQRCode\n\t\t */\n\t\tDrawing.prototype.draw = function (oQRCode) {\n            var _htOption = this._htOption;\n            var _el = this._el;\n\t\t\tvar nCount = oQRCode.getModuleCount();\n\t\t\tvar nWidth = Math.floor(_htOption.width / nCount);\n\t\t\tvar nHeight = Math.floor(_htOption.height / nCount);\n\t\t\tvar aHTML = ['<table style=\"border:0;border-collapse:collapse;\">'];\n\t\t\t\n\t\t\tfor (var row = 0; row < nCount; row++) {\n\t\t\t\taHTML.push('<tr>');\n\t\t\t\t\n\t\t\t\tfor (var col = 0; col < nCount; col++) {\n\t\t\t\t\taHTML.push('<td style=\"border:0;border-collapse:collapse;padding:0;margin:0;width:' + nWidth + 'px;height:' + nHeight + 'px;background-color:' + (oQRCode.isDark(row, col) ? _htOption.colorDark : _htOption.colorLight) + ';\"></td>');\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\taHTML.push('</tr>');\n\t\t\t}\n\t\t\t\n\t\t\taHTML.push('</table>');\n\t\t\t_el.innerHTML = aHTML.join('');\n\t\t\t\n\t\t\t// Fix the margin values as real size.\n\t\t\tvar elTable = _el.childNodes[0];\n\t\t\tvar nLeftMarginTable = (_htOption.width - elTable.offsetWidth) / 2;\n\t\t\tvar nTopMarginTable = (_htOption.height - elTable.offsetHeight) / 2;\n\t\t\t\n\t\t\tif (nLeftMarginTable > 0 && nTopMarginTable > 0) {\n\t\t\t\telTable.style.margin = nTopMarginTable + \"px \" + nLeftMarginTable + \"px\";\t\n\t\t\t}\n\t\t};\n\t\t\n\t\t/**\n\t\t * Clear the QRCode\n\t\t */\n\t\tDrawing.prototype.clear = function () {\n\t\t\tthis._el.innerHTML = '';\n\t\t};\n\t\t\n\t\treturn Drawing;\n\t})() : (function () { // Drawing in Canvas\n\t\tfunction _onMakeImage() {\n\t\t\tthis._elImage.src = this._elCanvas.toDataURL(\"image/png\");\n\t\t\tthis._elImage.style.display = \"block\";\n\t\t\tthis._elCanvas.style.display = \"none\";\t\t\t\n\t\t}\n\t\t\n\t\t// Android 2.1 bug workaround\n\t\t// http://code.google.com/p/android/issues/detail?id=5141\n\t\tif (this._android && this._android <= 2.1) {\n\t    \tvar factor = 1 / window.devicePixelRatio;\n\t        var drawImage = CanvasRenderingContext2D.prototype.drawImage; \n\t    \tCanvasRenderingContext2D.prototype.drawImage = function (image, sx, sy, sw, sh, dx, dy, dw, dh) {\n\t    \t\tif ((\"nodeName\" in image) && /img/i.test(image.nodeName)) {\n\t\t        \tfor (var i = arguments.length - 1; i >= 1; i--) {\n\t\t            \targuments[i] = arguments[i] * factor;\n\t\t        \t}\n\t    \t\t} else if (typeof dw == \"undefined\") {\n\t    \t\t\targuments[1] *= factor;\n\t    \t\t\targuments[2] *= factor;\n\t    \t\t\targuments[3] *= factor;\n\t    \t\t\targuments[4] *= factor;\n\t    \t\t}\n\t    \t\t\n\t        \tdrawImage.apply(this, arguments); \n\t    \t};\n\t\t}\n\t\t\n\t\t/**\n\t\t * Check whether the user's browser supports Data URI or not\n\t\t * \n\t\t * @private\n\t\t * @param {Function} fSuccess Occurs if it supports Data URI\n\t\t * @param {Function} fFail Occurs if it doesn't support Data URI\n\t\t */\n\t\tfunction _safeSetDataURI(fSuccess, fFail) {\n            var self = this;\n            self._fFail = fFail;\n            self._fSuccess = fSuccess;\n\n            // Check it just once\n            if (self._bSupportDataURI === null) {\n                var el = document.createElement(\"img\");\n                var fOnError = function() {\n                    self._bSupportDataURI = false;\n\n                    if (self._fFail) {\n                        self._fFail.call(self);\n                    }\n                };\n                var fOnSuccess = function() {\n                    self._bSupportDataURI = true;\n\n                    if (self._fSuccess) {\n                        self._fSuccess.call(self);\n                    }\n                };\n\n                el.onabort = fOnError;\n                el.onerror = fOnError;\n                el.onload = fOnSuccess;\n                el.src = \"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==\"; // the Image contains 1px data.\n                return;\n            } else if (self._bSupportDataURI === true && self._fSuccess) {\n                self._fSuccess.call(self);\n            } else if (self._bSupportDataURI === false && self._fFail) {\n                self._fFail.call(self);\n            }\n\t\t};\n\t\t\n\t\t/**\n\t\t * Drawing QRCode by using canvas\n\t\t * \n\t\t * @constructor\n\t\t * @param {HTMLElement} el\n\t\t * @param {Object} htOption QRCode Options \n\t\t */\n\t\tvar Drawing = function (el, htOption) {\n    \t\tthis._bIsPainted = false;\n    \t\tthis._android = _getAndroid();\n\t\t\n\t\t\tthis._htOption = htOption;\n\t\t\tthis._elCanvas = document.createElement(\"canvas\");\n\t\t\tthis._elCanvas.width = htOption.width;\n\t\t\tthis._elCanvas.height = htOption.height;\n\t\t\tel.appendChild(this._elCanvas);\n\t\t\tthis._el = el;\n\t\t\tthis._oContext = this._elCanvas.getContext(\"2d\");\n\t\t\tthis._bIsPainted = false;\n\t\t\tthis._elImage = document.createElement(\"img\");\n\t\t\tthis._elImage.alt = \"Scan me!\";\n\t\t\tthis._elImage.style.display = \"none\";\n\t\t\tthis._el.appendChild(this._elImage);\n\t\t\tthis._bSupportDataURI = null;\n\t\t};\n\t\t\t\n\t\t/**\n\t\t * Draw the QRCode\n\t\t * \n\t\t * @param {QRCode} oQRCode \n\t\t */\n\t\tDrawing.prototype.draw = function (oQRCode) {\n            var _elImage = this._elImage;\n            var _oContext = this._oContext;\n            var _htOption = this._htOption;\n            \n\t\t\tvar nCount = oQRCode.getModuleCount();\n\t\t\tvar nWidth = _htOption.width / nCount;\n\t\t\tvar nHeight = _htOption.height / nCount;\n\t\t\tvar nRoundedWidth = Math.round(nWidth);\n\t\t\tvar nRoundedHeight = Math.round(nHeight);\n\n\t\t\t_elImage.style.display = \"none\";\n\t\t\tthis.clear();\n\t\t\t\n\t\t\tfor (var row = 0; row < nCount; row++) {\n\t\t\t\tfor (var col = 0; col < nCount; col++) {\n\t\t\t\t\tvar bIsDark = oQRCode.isDark(row, col);\n\t\t\t\t\tvar nLeft = col * nWidth;\n\t\t\t\t\tvar nTop = row * nHeight;\n\t\t\t\t\t_oContext.strokeStyle = bIsDark ? _htOption.colorDark : _htOption.colorLight;\n\t\t\t\t\t_oContext.lineWidth = 1;\n\t\t\t\t\t_oContext.fillStyle = bIsDark ? _htOption.colorDark : _htOption.colorLight;\t\t\t\t\t\n\t\t\t\t\t_oContext.fillRect(nLeft, nTop, nWidth, nHeight);\n\t\t\t\t\t\n\t\t\t\t\t//    \n\t\t\t\t\t_oContext.strokeRect(\n\t\t\t\t\t\tMath.floor(nLeft) + 0.5,\n\t\t\t\t\t\tMath.floor(nTop) + 0.5,\n\t\t\t\t\t\tnRoundedWidth,\n\t\t\t\t\t\tnRoundedHeight\n\t\t\t\t\t);\n\t\t\t\t\t\n\t\t\t\t\t_oContext.strokeRect(\n\t\t\t\t\t\tMath.ceil(nLeft) - 0.5,\n\t\t\t\t\t\tMath.ceil(nTop) - 0.5,\n\t\t\t\t\t\tnRoundedWidth,\n\t\t\t\t\t\tnRoundedHeight\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis._bIsPainted = true;\n\t\t};\n\t\t\t\n\t\t/**\n\t\t * Make the image from Canvas if the browser supports Data URI.\n\t\t */\n\t\tDrawing.prototype.makeImage = function () {\n\t\t\tif (this._bIsPainted) {\n\t\t\t\t_safeSetDataURI.call(this, _onMakeImage);\n\t\t\t}\n\t\t};\n\t\t\t\n\t\t/**\n\t\t * Return whether the QRCode is painted or not\n\t\t * \n\t\t * @return {Boolean}\n\t\t */\n\t\tDrawing.prototype.isPainted = function () {\n\t\t\treturn this._bIsPainted;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Clear the QRCode\n\t\t */\n\t\tDrawing.prototype.clear = function () {\n\t\t\tthis._oContext.clearRect(0, 0, this._elCanvas.width, this._elCanvas.height);\n\t\t\tthis._bIsPainted = false;\n\t\t};\n\t\t\n\t\t/**\n\t\t * @private\n\t\t * @param {Number} nNumber\n\t\t */\n\t\tDrawing.prototype.round = function (nNumber) {\n\t\t\tif (!nNumber) {\n\t\t\t\treturn nNumber;\n\t\t\t}\n\t\t\t\n\t\t\treturn Math.floor(nNumber * 1000) / 1000;\n\t\t};\n\t\t\n\t\treturn Drawing;\n\t})();\n\t\n\t/**\n\t * Get the type by string length\n\t * \n\t * @private\n\t * @param {String} sText\n\t * @param {Number} nCorrectLevel\n\t * @return {Number} type\n\t */\n\tfunction _getTypeNumber(sText, nCorrectLevel) {\t\t\t\n\t\tvar nType = 1;\n\t\tvar length = _getUTF8Length(sText);\n\t\t\n\t\tfor (var i = 0, len = QRCodeLimitLength.length; i <= len; i++) {\n\t\t\tvar nLimit = 0;\n\t\t\t\n\t\t\tswitch (nCorrectLevel) {\n\t\t\t\tcase QRErrorCorrectLevel.L :\n\t\t\t\t\tnLimit = QRCodeLimitLength[i][0];\n\t\t\t\t\tbreak;\n\t\t\t\tcase QRErrorCorrectLevel.M :\n\t\t\t\t\tnLimit = QRCodeLimitLength[i][1];\n\t\t\t\t\tbreak;\n\t\t\t\tcase QRErrorCorrectLevel.Q :\n\t\t\t\t\tnLimit = QRCodeLimitLength[i][2];\n\t\t\t\t\tbreak;\n\t\t\t\tcase QRErrorCorrectLevel.H :\n\t\t\t\t\tnLimit = QRCodeLimitLength[i][3];\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\tif (length <= nLimit) {\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\tnType++;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (nType > QRCodeLimitLength.length) {\n\t\t\tthrow new Error(\"Too long data\");\n\t\t}\n\t\t\n\t\treturn nType;\n\t}\n\n\tfunction _getUTF8Length(sText) {\n\t\tvar replacedText = encodeURI(sText).toString().replace(/\\%[0-9a-fA-F]{2}/g, 'a');\n\t\treturn replacedText.length + (replacedText.length != sText ? 3 : 0);\n\t}\n\t\n\t/**\n\t * @class QRCode\n\t * @constructor\n\t * @example \n\t * new QRCode(document.getElementById(\"test\"), \"http://jindo.dev.naver.com/collie\");\n\t *\n\t * @example\n\t * var oQRCode = new QRCode(\"test\", {\n\t *    text : \"http://naver.com\",\n\t *    width : 128,\n\t *    height : 128\n\t * });\n\t * \n\t * oQRCode.clear(); // Clear the QRCode.\n\t * oQRCode.makeCode(\"http://map.naver.com\"); // Re-create the QRCode.\n\t *\n\t * @param {HTMLElement|String} el target element or 'id' attribute of element.\n\t * @param {Object|String} vOption\n\t * @param {String} vOption.text QRCode link data\n\t * @param {Number} [vOption.width=256]\n\t * @param {Number} [vOption.height=256]\n\t * @param {String} [vOption.colorDark=\"#000000\"]\n\t * @param {String} [vOption.colorLight=\"#ffffff\"]\n\t * @param {QRCode.CorrectLevel} [vOption.correctLevel=QRCode.CorrectLevel.H] [L|M|Q|H] \n\t */\n\tQRCode = function (el, vOption) {\n\t\tthis._htOption = {\n\t\t\twidth : 256, \n\t\t\theight : 256,\n\t\t\ttypeNumber : 4,\n\t\t\tcolorDark : \"#000000\",\n\t\t\tcolorLight : \"#ffffff\",\n\t\t\tcorrectLevel : QRErrorCorrectLevel.H\n\t\t};\n\t\t\n\t\tif (typeof vOption === 'string') {\n\t\t\tvOption\t= {\n\t\t\t\ttext : vOption\n\t\t\t};\n\t\t}\n\t\t\n\t\t// Overwrites options\n\t\tif (vOption) {\n\t\t\tfor (var i in vOption) {\n\t\t\t\tthis._htOption[i] = vOption[i];\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (typeof el == \"string\") {\n\t\t\tel = document.getElementById(el);\n\t\t}\n\n\t\tif (this._htOption.useSVG) {\n\t\t\tDrawing = svgDrawer;\n\t\t}\n\t\t\n\t\tthis._android = _getAndroid();\n\t\tthis._el = el;\n\t\tthis._oQRCode = null;\n\t\tthis._oDrawing = new Drawing(this._el, this._htOption);\n\t\t\n\t\tif (this._htOption.text) {\n\t\t\tthis.makeCode(this._htOption.text);\t\n\t\t}\n\t};\n\t\n\t/**\n\t * Make the QRCode\n\t * \n\t * @param {String} sText link data\n\t */\n\tQRCode.prototype.makeCode = function (sText) {\n\t\tthis._oQRCode = new QRCodeModel(_getTypeNumber(sText, this._htOption.correctLevel), this._htOption.correctLevel);\n\t\tthis._oQRCode.addData(sText);\n\t\tthis._oQRCode.make();\n\t\tthis._el.title = sText;\n\t\tthis._oDrawing.draw(this._oQRCode);\t\t\t\n\t\tthis.makeImage();\n\t};\n\t\n\t/**\n\t * Make the Image from Canvas element\n\t * - It occurs automatically\n\t * - Android below 3 doesn't support Data-URI spec.\n\t * \n\t * @private\n\t */\n\tQRCode.prototype.makeImage = function () {\n\t\tif (typeof this._oDrawing.makeImage == \"function\" && (!this._android || this._android >= 3)) {\n\t\t\tthis._oDrawing.makeImage();\n\t\t}\n\t};\n\t\n\t/**\n\t * Clear the QRCode\n\t */\n\tQRCode.prototype.clear = function () {\n\t\tthis._oDrawing.clear();\n\t};\n\t\n\t/**\n\t * @name QRCode.CorrectLevel\n\t */\n\tQRCode.CorrectLevel = QRErrorCorrectLevel;\n\t\n\treturn QRCode;\n});\n\n","\ndefine('tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/notSupported', ['handlebars'], function(hb){ return hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n    <div class=\\\"additional\\\">\\n        <div class=\\\"title\\\">Additional information:</div>\\n        <p class=\\\"info\\\">\";\n  if (helper = helpers.additional) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.additional); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</p>\\n    </div>\\n\";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"qti-interaction render-error feedback-error\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" >\\n    <span class=\\\"icon-error\\\"></span>\\n    <p class=\\\"message\\\">\";\n  if (helper = helpers.message) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.message); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</p>\\n\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.additional), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</div>\";\n  return buffer;\n  }); });\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n\n/**\n * Helps you to retrieve the element container\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiPrint/qtiPrintRenderer/helpers/container',[\n    'jquery',\n    'taoQtiItem/qtiItem/core/Element'\n], function($, Element) {\n    'use strict';\n\n    /**\n     * Helps you to retrieve the DOM element (as a jquery element)\n     * @exports taoQtiPrint/qtiPrintRenderer/helpers/container\n     *\n     * Get the container of the given element\n     * @param {QtiElement} element - the QTI Element to find the container for\n     * @param {jQueryElement} [$scope] - if present scope of the container\n     * @returns {jQueryElement} the container\n     */\n    return function getContainer(element, $scope) {\n\n        var serial = element.getSerial();\n        var selector = '[data-serial=' + serial + ']';\n\n        if (Element.isA(element, 'choice')) {\n            selector = '.qti-choice' + selector;\n        } else if (Element.isA(element, 'interaction')) {\n            selector = '.qti-interaction' + selector;\n        }\n\n        return $scope && $scope.length ? $(selector, $scope) : $(selector);\n    };\n});\n\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2017 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sbastien Conan <jean-sebastien@taotesting.com>\n */\ndefine('taoQtiPrint/qtiPrintRenderer/renderers/interactions/NotSupported',[\n    'lodash',\n    'i18n',\n    'tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/notSupported',\n    'taoQtiPrint/qtiPrintRenderer/helpers/container'\n], function (_, __, tpl, getContainer) {\n    'use strict';\n\n    /**\n     * Creates a fallback interaction to warn about lack of support for a particular QTI class\n     * @param qtiClass\n     * @returns {Object}\n     */\n    function interactionNotSupported(qtiClass) {\n        return {\n            qtiClass: qtiClass,\n            template: tpl,\n            getContainer: getContainer,\n            resetResponse: _.noop,\n            setResponse: _.noop,\n            getData: function getData(interaction, data) {\n                return _.merge(data || {}, {\n                    message: __('The interaction \"%s\" is not supported for printing purpose!', qtiClass)\n                });\n            }\n        };\n    }\n\n    return interactionNotSupported;\n});\n","\ndefine('tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/rawResponse', ['handlebars'], function(hb){ return hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n        <div class=\\\"additional\\\">\\n            <div class=\\\"title\\\">Additional information:</div>\\n            <p class=\\\"info\\\">\";\n  if (helper = helpers.additional) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.additional); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</p>\\n        </div>\\n        \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" >\\n    <h6>\";\n  if (helper = helpers.qtiClass) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.qtiClass); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</h6>\\n    <div class=\\\"render-error feedback-info\\\">\\n        <span class=\\\"icon-error\\\"></span>\\n        <p class=\\\"message\\\">\";\n  if (helper = helpers.message) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.message); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</p>\\n        \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.additional), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </div>\\n    <div class=\\\"responses\\\"></div>\\n</div>\";\n  return buffer;\n  }); });\n","\ndefine('tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/responsesList', ['handlebars'], function(hb){ return hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n    <dt>\";\n  if (helper = helpers.name) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.name); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</dt>\\n    <dd>\";\n  if (helper = helpers.value) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.value); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</dd>\\n\";\n  return buffer;\n  }\n\n  buffer += \"<dl>\\n\";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.responses), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</dl>\";\n  return buffer;\n  }); });\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2017 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sbastien Conan <jean-sebastien@taotesting.com>\n */\ndefine('taoQtiPrint/qtiPrintRenderer/renderers/interactions/RawResponse',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/rawResponse',\n    'tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/responsesList',\n    'taoQtiPrint/qtiPrintRenderer/helpers/container',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse'\n], function ($, _, __, tpl, responsesTpl, getContainer, pciResponse) {\n    'use strict';\n\n    /**\n     * Creates a fallback interaction that only displays the raw responses\n     * @param qtiClass\n     * @returns {Object}\n     */\n    function interactionRawResponse(qtiClass) {\n        return {\n            qtiClass: qtiClass,\n            template: tpl,\n            getContainer: getContainer,\n            getData: function getData(interaction, data) {\n                return _.merge(data || {}, {\n                    qtiClass: qtiClass,\n                    message: __('The interaction \"%s\" is not fully supported for printing purpose, only the raw responses will be rendered', qtiClass)\n                });\n            },\n            setResponse: function setResponse(interaction, response) {\n\n                var $container = interaction.getContainer();\n                var $responses = $('.responses', $container).empty();\n                var responseValue;\n\n                try {\n                    responseValue = pciResponse.unserialize(response, interaction);\n                } catch (e) {\n                }\n\n                if (responseValue && responseValue.length) {\n                    $responses.html(responsesTpl({\n                        responses: [{\n                            name: interaction.attributes.responseIdentifier,\n                            value: responseValue.join(', ')\n                        }]\n                    }));\n                }\n            },\n            setState: function setState(interaction, state) {\n                if (_.isObject(state)) {\n                    if (state.response) {\n                        interaction.resetResponse();\n                        interaction.setResponse(state.response);\n                    }\n                }\n            }\n        };\n    }\n\n    return interactionRawResponse;\n});\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n *\n */\n\n/**\n * The QTI Print renderer configuration\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiPrint/qtiCommonRenderer/renderers/config',[\n    'taoQtiItem/qtiCommonRenderer/renderers/config',\n    'taoQtiPrint/qtiPrintRenderer/renderers/interactions/NotSupported',\n    'taoQtiPrint/qtiPrintRenderer/renderers/interactions/RawResponse'\n], function(defaultConfig, NotSupported, RawResponse){\n    'use strict';\n\n    /**\n     * Applies a custom renderer for a particular interaction\n     * @param {String} qtiClass\n     * @param {Function} rendererFactory\n     */\n    function applyRenderer(qtiClass, rendererFactory) {\n        var moduleUri = 'taoQtiPrint/qtiPrintRenderer/renderers/' + qtiClass;\n        define(moduleUri, rendererFactory(qtiClass));\n\n        defaultConfig.locations[qtiClass] = moduleUri;\n    }\n\n    /**\n     * Defines an interaction that is not supported\n     * @param qtiClass\n     */\n    function defineNotSupported(qtiClass) {\n        applyRenderer(qtiClass, NotSupported);\n    }\n\n    /**\n     * Defines an interaction that will only display raw responses\n     * @param qtiClass\n     */\n    function defineRawResponse(qtiClass) {\n        applyRenderer(qtiClass, RawResponse);\n    }\n\n    // apply some tweaks to fit the print needs\n    defaultConfig.options.enableDragAndDrop = null;\n\n    // defines the interaction that are not supported\n    defineNotSupported('mediaInteraction');\n    defineNotSupported('uploadInteraction');\n\n    // defines the interaction that are partially supported: only the raw responses will be rendered\n    // @todo: provide support for custom interactions\n    defineRawResponse('customInteraction');\n\n    return defaultConfig;\n});\n\n","\ndefine('tpl!taoQtiPrint/qtiPrintRenderer/tpl/choices/inlineChoice', ['handlebars'], function(hb){ return hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n    <input type=\\\"radio\\\" id=\\\"response-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.interaction)),stack1 == null || stack1 === false ? stack1 : stack1.serial)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\\n           name=\\\"response-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.interaction)),stack1 == null || stack1 === false ? stack1 : stack1.serial)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" value=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\\n    \";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n    <input type=\\\"checkbox\\\" id=\\\"response-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.interaction)),stack1 == null || stack1 === false ? stack1 : stack1.serial)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\\n           name=\\\"response-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.interaction)),stack1 == null || stack1 === false ? stack1 : stack1.serial)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" value=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\\n    \";\n  return buffer;\n  }\n\n  buffer += \"<span class=\\\"qti-choice qti-inlineChoice\\\" data-identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.unique), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <label for=\\\"response-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.interaction)),stack1 == null || stack1 === false ? stack1 : stack1.serial)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</label>\\n</span>\";\n  return buffer;\n  }); });\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2017 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n */\n\n/**\n * The inline choice renderer\n *\n * @author Jean-Sebastien CONAN <jean-sebastien@taotesting.com>\n */\ndefine('taoQtiPrint/qtiPrintRenderer/renderers/choices/InlineChoice',[\n    'lodash',\n    'tpl!taoQtiPrint/qtiPrintRenderer/tpl/choices/inlineChoice',\n    'taoQtiPrint/qtiPrintRenderer/helpers/container'\n], function (_, tpl, getContainer) {\n    'use strict';\n\n    /**\n     * Expose the renderer\n     * @exports taoQtiPrint/qtiPrintRenderer/renderers/choices/inlineChoice\n     */\n    return {\n        qtiClass: 'inlineChoice',\n        getContainer: getContainer,\n        template: tpl,\n        getData: function getData(choice, data) {\n            data.body = _.unescape(data.body);\n            return data;\n        }\n    };\n});\n\n","\ndefine('tpl!taoQtiPrint/qtiPrintRenderer/tpl/choices/simpleAssociableChoice.matchInteraction', ['handlebars'], function(hb){ return hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<th class=\\\"qti-choice qti-associableChoice qti-simpleAssociableChoice\\\" data-identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</th>\";\n  return buffer;\n  }); });\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2017 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n */\n\n/**\n * The match choice renderer\n *\n * @author Jean-Sebastien CONAN <jean-sebastien@taotesting.com>\n */\ndefine('taoQtiPrint/qtiPrintRenderer/renderers/choices/SimpleAssociableChoice.MatchInteraction',[\n    'tpl!taoQtiPrint/qtiPrintRenderer/tpl/choices/simpleAssociableChoice.matchInteraction',\n    'taoQtiPrint/qtiPrintRenderer/helpers/container'\n], function (tpl, getContainer) {\n    'use strict';\n\n    /**\n     * Expose the renderer\n     * @exports taoQtiPrint/qtiPrintRenderer/renderers/choices/simpleAssociableChoice.matchInteraction\n     */\n    return {\n        qtiClass : 'simpleAssociableChoice.matchInteraction',\n        getContainer : getContainer,\n        template : tpl\n    };\n});\n\n","\ndefine('tpl!taoQtiPrint/qtiPrintRenderer/tpl/choices/simpleChoice.choiceInteraction', ['handlebars'], function(hb){ return hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n        <input type=\\\"radio\\\" id=\\\"response-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.interaction)),stack1 == null || stack1 === false ? stack1 : stack1.serial)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" name=\\\"response-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.interaction)),stack1 == null || stack1 === false ? stack1 : stack1.serial)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" value=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\\n        \";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n        <input type=\\\"checkbox\\\" id=\\\"response-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.interaction)),stack1 == null || stack1 === false ? stack1 : stack1.serial)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" name=\\\"response-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.interaction)),stack1 == null || stack1 === false ? stack1 : stack1.serial)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" value=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\\n        \";\n  return buffer;\n  }\n\n  buffer += \"<li class=\\\"qti-choice qti-simpleChoice\\\" data-identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n        \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.unique), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        <label for=\\\"response-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.interaction)),stack1 == null || stack1 === false ? stack1 : stack1.serial)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</label>\\n</li>\";\n  return buffer;\n  }); });\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n\n/**\n * The simple choice renderer\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiPrint/qtiPrintRenderer/renderers/choices/SimpleChoice.ChoiceInteraction',[\n   'tpl!taoQtiPrint/qtiPrintRenderer/tpl/choices/simpleChoice.choiceInteraction',\n   'taoQtiPrint/qtiPrintRenderer/helpers/container'\n], function(tpl, getContainer){\n    'use strict';\n\n    /**\n     * Detects image of relative size in choice\n     * @param {jQuery} $container \n     * @returns {boolean} flag if simple choice has relative sized image\n     */\n    function hasRelativeSizedImage($container) {\n        let flag = false;\n        const $img = $container.find('img');\n        if($img && $img.length && $img.attr('width') && ~$img.attr('width').indexOf('%')) {\n            flag = true;    \n        }\n        return flag;\n    }\n\n    /**\n     * Expose the renderer\n     * @exports taoQtiPrint/qtiPrintRenderer/renderers/choices/SimpleChoice.ChoiceInteration\n     */\n    return {\n        qtiClass:     'simpleChoice.choiceInteraction',\n        getContainer: getContainer,\n        template:     tpl,\n        getData:      function(choice, data){\n            data.unique = (parseInt(data.interaction.attributes.maxChoices) === 1);\n            return data;\n        },\n        render: function(simpleChoice) {\n            const $container = getContainer(simpleChoice);\n            if(hasRelativeSizedImage($container)) {\n                const imgSrc = $container.find('img').attr('src');\n                const $label = $container.find('label');\n                const $qtiBlock = $container.find('.qti-block');\n                $label.attr('data-has-relative-image', 'true');\n                $qtiBlock.css('background-image', `url(${imgSrc})`);\n            }\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n * Copyright (c) 2022 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n */\n\n/**\n * The QTI Print renderer configuration\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiPrint/qtiPrintRenderer/renderers/config',[\n    'taoItems/assets/manager',\n    'taoItems/assets/strategies'\n], function(assetManagerFactory, assetStrategies){\n    'use strict';\n\n\n    //asset manager using base url\n    var assetManager = assetManagerFactory([\n        assetStrategies.taomedia,\n        assetStrategies.external,\n        assetStrategies.base64,\n        assetStrategies.baseUrl\n    ], {baseUrl : ''});\n\n    /**\n     * @exports taoQtiPrint/qtiPrintRenderer/renderers/config\n     */\n    return {\n        name        : 'printRenderer',\n        locations   : {\n            'assessmentItem':                              'taoQtiPrint/qtiPrintRenderer/renderers/Item',\n            '_container':                                  'taoQtiPrint/qtiPrintRenderer/renderers/Container',\n            'stylesheet':                                  'taoQtiPrint/qtiPrintRenderer/renderers/Stylesheet',\n            'figure':                                      'taoQtiPrint/qtiPrintRenderer/renderers/Figure',\n            'figcaption':                                  'taoQtiPrint/qtiPrintRenderer/renderers/Figcaption',\n            'img':                                         'taoQtiPrint/qtiPrintRenderer/renderers/Img',\n            'rubricBlock':                                 'taoQtiPrint/qtiPrintRenderer/renderers/RubricBlock',\n            'object':                                      'taoQtiPrint/qtiPrintRenderer/renderers/Object',\n            'prompt':                                      'taoQtiPrint/qtiPrintRenderer/renderers/interactions/Prompt',\n            'choiceInteraction':                           'taoQtiPrint/qtiPrintRenderer/renderers/interactions/ChoiceInteraction',\n            'matchInteraction':                            'taoQtiPrint/qtiPrintRenderer/renderers/interactions/MatchInteraction',\n            'inlineChoiceInteraction':                     'taoQtiPrint/qtiPrintRenderer/renderers/interactions/InlineChoiceInteraction',\n            'extendedTextInteraction':                     'taoQtiPrint/qtiPrintRenderer/renderers/interactions/ExtendedTextInteraction',\n            'textEntryInteraction':                        'taoQtiPrint/qtiPrintRenderer/renderers/interactions/TextEntryInteraction',\n            'simpleChoice.choiceInteraction':              'taoQtiPrint/qtiPrintRenderer/renderers/choices/SimpleChoice.ChoiceInteraction',\n            'simpleAssociableChoice.matchInteraction':     'taoQtiPrint/qtiPrintRenderer/renderers/choices/SimpleAssociableChoice.MatchInteraction',\n            'inlineChoice':                                'taoQtiPrint/qtiPrintRenderer/renderers/choices/InlineChoice',\n            'math':                                        'taoQtiPrint/qtiPrintRenderer/renderers/Math',\n            'include':                                     'taoQtiPrint/qtiPrintRenderer/renderers/Include',\n            'table':                                        'taoQtiPrint/qtiPrintRenderer/renderers/Table',\n\n//do not print\n            '_simpleFeedbackRule':                         false,\n            'outcomeDeclaration':                          false,\n            'responseDeclaration':                         false,\n            'responseProcessing':                          false,\n            'modalFeedback':                               false,\n\n//not implemented\n            'orderInteraction':                            false,\n            'associateInteraction':                        false,\n            'sliderInteraction':                           false,\n            'simpleChoice.orderInteraction':               false,\n            'hottext':                                     false,\n            'gap':                                         false,\n            'gapText':                                     false,\n            'simpleAssociableChoice.associateInteraction': false,\n            'hottextInteraction':                          false,\n            'hotspotInteraction':                          false,\n            'hotspotChoice':                               false,\n            'associableHotspot':                           false,\n            'gapMatchInteraction':                         false,\n            'selectPointInteraction':                      false,\n            'graphicOrderInteraction':                     false,\n            'mediaInteraction':                            false,\n            'uploadInteraction':                           false,\n            'graphicGapMatchInteraction':                  false,\n            'gapImg':                                      false,\n            'graphicAssociateInteraction':                 false,\n            'customInteraction':                           false,\n            'infoControl':                                 false,\n            'endAttemptInteraction':                       false\n        },\n        options:   {\n            assetManager: assetManager\n        }\n    };\n});\n\n","\ndefine('tpl!taoQtiPrint/qtiPrintRenderer/tpl/container', ['handlebars'], function(hb){ return hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var stack1, helper, options, functionType=\"function\", self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"<div class=\\\"qti-block\\\">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</div>\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\n\n  stack1 = (helper = helpers.equal || (depth0 && depth0.equal),options={hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data},helper ? helper.call(depth0, (depth0 && depth0.contentModel), \"blockStatic\", options) : helperMissing.call(depth0, \"equal\", (depth0 && depth0.contentModel), \"blockStatic\", options));\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }); });\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n\n/**\n * The container renderer\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiPrint/qtiPrintRenderer/renderers/Container',['tpl!taoQtiPrint/qtiPrintRenderer/tpl/container'], function(tpl){\n    'use strict';\n\n    /**\n     * Expose the renderer\n     * @exports taoQtiPrint/qtiPrintRenderer/renderers/Container\n     */\n    return {\n        qtiClass : '_container',\n        template : tpl\n    };\n});\n\n","\ndefine('tpl!taoQtiPrint/qtiPrintRenderer/tpl/figcaption', ['handlebars'], function(hb){ return hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" lang=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['xml:lang'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\n  buffer += \"<figcaption\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['xml:lang']), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</figcaption>\";\n  return buffer;\n  }); });\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2022 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n */\n\ndefine('taoQtiPrint/qtiPrintRenderer/renderers/Figcaption',[\n    'tpl!taoQtiPrint/qtiPrintRenderer/tpl/figcaption'\n], function(tpl){\n    'use strict';\n\n    return {\n        qtiClass: 'figcaption',\n        template: tpl\n    };\n});\n\n","\ndefine('tpl!taoQtiPrint/qtiPrintRenderer/tpl/figure', ['handlebars'], function(hb){ return hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" class=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" lang=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['xml:lang'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\n  buffer += \"<figure data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class']), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['xml:lang']), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</figure>\";\n  return buffer;\n  }); });\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2022 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n */\n\ndefine('taoQtiPrint/qtiPrintRenderer/renderers/Figure',[\n    'tpl!taoQtiPrint/qtiPrintRenderer/tpl/figure',\n    'taoQtiPrint/qtiPrintRenderer/helpers/container'\n], function(tpl, getContainer){\n    'use strict';\n\n    return {\n        qtiClass: 'figure',\n        getContainer: getContainer,\n        template: tpl,\n        render: function(figure) {\n            var $figure = getContainer(figure);\n            var $img = $figure.find('img');\n            if ($img.length) {\n                // move width from image to figure\n                $figure.css({ width: $img.attr('width') });\n                $img.attr('width', '100%');\n            }\n        }\n    };\n});\n\n","\ndefine('tpl!taoQtiPrint/qtiPrintRenderer/tpl/img', ['handlebars'], function(hb){ return hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" id=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" class=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" height=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.height)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program7(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" width=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.width)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\n  buffer += \"<img\\n    data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"\\n    data-qti-class=\\\"img\\\"\\n    src=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.src)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\\n    alt=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.alt)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.id), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class']), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.height), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.width), {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n/>\";\n  return buffer;\n  }); });\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n\n/**\n * The img renderer\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiPrint/qtiPrintRenderer/renderers/Img',[\n    'tpl!taoQtiPrint/qtiPrintRenderer/tpl/img',\n    'taoQtiPrint/qtiPrintRenderer/helpers/container'\n], function(tpl, getContainer){\n    'use strict';\n\n    /**\n     * Expose the renderer\n     * @exports taoQtiPrint/qtiPrintRenderer/renderers/Img\n     */\n    return {\n        qtiClass:     'img',\n        template:     tpl,\n        getContainer: getContainer\n    };\n});\n\n","\ndefine('tpl!taoQtiPrint/qtiPrintRenderer/tpl/include', ['handlebars'], function(hb){ return hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"qti-include\\\" data-href=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.href)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\\n    \";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</div>\";\n  return buffer;\n  }); });\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n */\ndefine('taoQtiPrint/qtiPrintRenderer/renderers/Include',[\n    'tpl!taoQtiPrint/qtiPrintRenderer/tpl/include',\n    'taoQtiPrint/qtiPrintRenderer/helpers/container'\n], function(tpl, getContainer){\n    'use strict';\n\n    /**\n     * Expose the renderer\n     * @exports taoQtiPrint/qtiPrintRenderer/renderers/Include\n     */\n    return {\n        qtiClass:     'include',\n        template:     tpl,\n        getContainer: getContainer\n    };\n});\n\n","\ndefine('tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/choiceInteraction', ['handlebars'], function(hb){ return hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \" horizontal\";\n  }\n\nfunction program5(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<article class=\\\"qti-interaction qti-blockInteraction qti-choiceInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"choiceInteraction\\\">\\n  <span class=\\\"response-identifier\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.responseIdentifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</span>\\n  \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  <ol class=\\\"plain block-listing solid choice-area\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.horizontal), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\\n      \";\n  options={hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data}\n  if (helper = helpers.choices) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.choices); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.choices) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  </ol>\\n</article>\";\n  return buffer;\n  }); });\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n\n/**\n * The choice interaction renderer\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiPrint/qtiPrintRenderer/renderers/interactions/ChoiceInteraction',[\n    'lodash',\n    'tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/choiceInteraction',\n    'taoQtiPrint/qtiPrintRenderer/helpers/container'\n], function(_, tpl, getContainer){\n    'use strict';\n\n    /**\n     * Expose the renderer\n     * @exports taoQtiPrint/qtiPrintRenderer/renderers/interactions/ChoiceInteraction\n     */\n    return {\n        qtiClass:     'choiceInteraction',\n        template:     tpl,\n        getContainer: getContainer,\n        getData:      function getCustomData(interaction, data){\n            return _.merge(data || {}, {\n                horizontal : (interaction.attr('orientation') === 'horizontal')\n            });\n        }\n    };\n});\n\n","\ndefine('tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/extendedTextInteraction', ['handlebars'], function(hb){ return hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.maxStringLoop), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        {!-- If there's an expected length or a max length --}}\\n        \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.expectedLength), {hash:{},inverse:self.noop,fn:self.program(9, program9, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.maxLength), {hash:{},inverse:self.noop,fn:self.program(11, program11, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \\n        \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.maxWords), {hash:{},inverse:self.noop,fn:self.program(13, program13, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  return buffer;\n  }\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n            <textarea class=\\\"text-container text-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.format)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" solid\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class']), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" name=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"_\"\n    + escapeExpression((typeof depth0 === functionType ? depth0.apply(depth0) : depth0))\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.patternMask), {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"></textarea>\\n        \";\n  return buffer;\n  }\nfunction program5(depth0,data) {\n  \n  \n  return \" attributes.class\";\n  }\n\nfunction program7(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"pattern=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.patternMask)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program9(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n            <div class=\\\"text-counter\\\">\\n                <span class=\\\"count-chars\\\">0</span> \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"of\", options) : helperMissing.call(depth0, \"__\", \"of\", options)))\n    + \" \"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.expectedLength)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"chars\", options) : helperMissing.call(depth0, \"__\", \"chars\", options)))\n    + \" \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"recommanded\", options) : helperMissing.call(depth0, \"__\", \"recommanded\", options)))\n    + \".\\n            </div>\\n        \";\n  return buffer;\n  }\n\nfunction program11(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n            <div class=\\\"text-counter\\\">\\n                <span class=\\\"count-chars\\\">0</span> \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"of\", options) : helperMissing.call(depth0, \"__\", \"of\", options)))\n    + \" \";\n  if (helper = helpers.maxLength) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.maxLength); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \" \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"chars\", options) : helperMissing.call(depth0, \"__\", \"chars\", options)))\n    + \" \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"maximum\", options) : helperMissing.call(depth0, \"__\", \"maximum\", options)))\n    + \".\\n            </div>\\n        \";\n  return buffer;\n  }\n\nfunction program13(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n            <div class=\\\"text-counter\\\">\\n                <span class=\\\"count-words\\\">0</span> \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"of\", options) : helperMissing.call(depth0, \"__\", \"of\", options)))\n    + \" \";\n  if (helper = helpers.maxWords) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.maxWords); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \" \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"words\", options) : helperMissing.call(depth0, \"__\", \"words\", options)))\n    + \" \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"maximum\", options) : helperMissing.call(depth0, \"__\", \"maximum\", options)))\n    + \".\\n            </div>\\n        \";\n  return buffer;\n  }\n\nfunction program15(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n        <textarea class=\\\"text-container text-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.format)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" solid\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class']), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.patternMask), {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"></textarea>\\n        \\n        \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.expectedLength), {hash:{},inverse:self.noop,fn:self.program(16, program16, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.maxLength), {hash:{},inverse:self.noop,fn:self.program(11, program11, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \\n        \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.maxWords), {hash:{},inverse:self.noop,fn:self.program(13, program13, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  return buffer;\n  }\nfunction program16(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n            <div class=\\\"text-counter\\\">\\n                <span class=\\\"count-chars\\\">0</span> \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"of\", options) : helperMissing.call(depth0, \"__\", \"of\", options)))\n    + \" \"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.expectedLength)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"chars\", options) : helperMissing.call(depth0, \"__\", \"chars\", options)))\n    + \" \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"recommended\", options) : helperMissing.call(depth0, \"__\", \"recommended\", options)))\n    + \".\\n            </div>\\n        \";\n  return buffer;\n  }\n\n  buffer += \"<article class=\\\"qti-interaction qti-blockInteraction qti-extendedTextInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"extendedTextInteraction\\\">\\n    <span class=\\\"response-identifier\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.responseIdentifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</span>\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <div class=\\\"instruction-container\\\"></div>\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.multiple), {hash:{},inverse:self.program(15, program15, data),fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</article>\";\n  return buffer;\n  }); });\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n\n/**\n * The extended text interaction renderer\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiPrint/qtiPrintRenderer/renderers/interactions/ExtendedTextInteraction',[\n    'lodash',\n    'tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/extendedTextInteraction',\n    'taoQtiPrint/qtiPrintRenderer/helpers/container',\n], function(_, tpl, getContainer){\n    'use strict';\n\n    /**\n     * parse the pattern (idealy from patternMask) and return the max words / chars from the pattern\n     * @param  {String} pattern String from patternMask\n     * @param  {String} type    the type of information you want : words / chars\n     * @return {Number|null}    the number extracted of the pattern, or null if not found\n     */\n    var _parsePattern = function(pattern,type){\n        if (pattern === undefined){return null;}\n\n        var regexChar = /\\^\\[\\\\s\\\\S\\]\\{\\d+\\,(\\d+)\\}\\$/,\n        regexWords =  /\\^\\(\\?\\:\\(\\?\\:\\[\\^\\\\s\\\\:\\\\!\\\\\\?\\\\\\;\\\\\\\\\\\\\\]\\+\\)\\[\\\\s\\\\:\\\\!\\\\\\?\\\\;\\\\\\\\\\\\\\]\\*\\)\\{\\d+\\,(\\d+)\\}\\$/,\n        result;\n\n        if (type === \"words\") {\n            result = pattern.match(regexWords);\n            if (result !== null && result.length > 1) {\n                return parseInt(result[1],10);\n            }else{\n                return null;\n            }\n        }else if (type === \"chars\"){\n            result = pattern.match(regexChar);\n\n            if (result !== null && result.length > 1) {\n                return parseInt(result[1],10);\n            }else{\n                return null;\n            }\n        }else{\n            return null;\n        }\n    };\n\n    /**\n     * Expose the renderer\n     * @exports taoQtiPrint/qtiPrintRenderer/renderers/interactions/ExtendedTextInteraction\n     */\n    return {\n        qtiClass:           'extendedTextInteraction',\n        template:           tpl,\n        getContainer:       getContainer,\n        getData:            function getCustomData (interaction, data){\n            var pattern = interaction.attr('patternMask'),\n                maxWords = parseInt(_parsePattern(pattern,'words')),\n                maxLength = parseInt(_parsePattern(pattern, 'chars')),\n                expectedLength = parseInt(interaction.attr('expectedLines'),10);\n            return _.merge(data || {}, {\n                maxWords:   (! isNaN(maxWords)) ? maxWords : undefined,\n                maxLength:  (! isNaN(maxLength)) ? maxLength : undefined,\n                attributes: (! isNaN(expectedLength)) ? { expectedLength :  expectedLength * 72} : undefined\n            });\n        }\n    };\n});\n\n","\ndefine('tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/inlineChoiceInteraction', ['handlebars'], function(hb){ return hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<span class=\\\"qti-interaction qti-inlineInteraction qti-inlineChoiceInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"\\n      data-qti-class=\\\"inlineChoiceInteraction\\\">\\n        \";\n  options={hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data}\n  if (helper = helpers.choices) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.choices); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.choices) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        <span class=\\\"response-identifier\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.responseIdentifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</span>\\n</span>\";\n  return buffer;\n  }); });\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2017 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n */\n\n/**\n * The inline choice interaction renderer\n *\n * @author Jean-Sebastien CONAN <jean-sebastien@taotesting.com>\n */\ndefine('taoQtiPrint/qtiPrintRenderer/renderers/interactions/InlineChoiceInteraction',[\n    'tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/inlineChoiceInteraction',\n    'taoQtiPrint/qtiPrintRenderer/helpers/container'\n], function(tpl, getContainer){\n    'use strict';\n\n    /**\n     * Expose the renderer\n     * @exports taoQtiPrint/qtiPrintRenderer/renderers/interactions/InlineChoiceInteraction\n     */\n    return {\n        qtiClass : 'inlineChoiceInteraction',\n        template : tpl,\n        getContainer: getContainer\n    };\n});\n\n","\ndefine('tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/matchInteraction', ['handlebars'], function(hb){ return hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"id=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" \"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1));\n  return buffer;\n  }\n\nfunction program5(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program7(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program9(depth0,data,depth1) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n      <tr>\\n        \";\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \";\n  stack1 = helpers.each.call(depth0, (depth1 && depth1.matchSet1), {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n      </tr>\\n      \";\n  return buffer;\n  }\nfunction program10(depth0,data) {\n  \n  \n  return \"\\n        <td>\\n          <label>\\n            <input type=\\\"checkbox\\\" >\\n            <span class=\\\"icon-checkbox cross\\\"></span>\\n          </label>\\n        </td>\\n        \";\n  }\n\n  buffer += \"<div \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.id), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" class=\\\"qti-interaction qti-blockInteraction qti-matchInteraction\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class']), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"matchInteraction\\\">\\n  <span class=\\\"response-identifier\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.responseIdentifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</span>\\n  \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  <div class=\\\"instruction-container\\\"></div>\\n  <div class=\\\"match-interaction-area\\\">\\n    <table class=\\\"matrix\\\">\\n      <thead>\\n      <tr>\\n        <th> </th>\\n        \";\n  options={hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data}\n  if (helper = helpers.matchSet1) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.matchSet1); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.matchSet1) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n      </tr>\\n      </thead>\\n      <tbody>\\n      \";\n  options={hash:{},inverse:self.noop,fn:self.programWithDepth(9, program9, data, depth0),data:data}\n  if (helper = helpers.matchSet2) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.matchSet2); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.matchSet2) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.programWithDepth(9, program9, data, depth0),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n      </tbody>\\n    </table>\\n  </div>\\n  <div class=\\\"notification-container\\\"></div>\\n</div>\";\n  return buffer;\n  }); });\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2017 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n */\n\n/**\n * The match interaction renderer\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiPrint/qtiPrintRenderer/renderers/interactions/MatchInteraction',[\n    'tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/matchInteraction',\n    'taoQtiPrint/qtiPrintRenderer/helpers/container'\n], function(tpl, getContainer){\n    'use strict';\n\n    /**\n     * Expose the common renderer for the match interaction\n     * @exports taoQtiPrint/qtiPrintRenderer/renderers/interactions/MatchInteraction\n     */\n    return {\n        qtiClass : 'matchInteraction',\n        template : tpl,\n        getContainer : getContainer\n    };\n});\n\n","\ndefine('tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/prompt', ['handlebars'], function(hb){ return hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"qti-prompt-container\\\">\\n    <p class=\\\"qti-prompt\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</p>\\n</div>\";\n  return buffer;\n  }); });\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n\n/**\n * The prompt interaction renderer\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiPrint/qtiPrintRenderer/renderers/interactions/Prompt',[\n    'tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/prompt',\n    'taoQtiPrint/qtiPrintRenderer/helpers/container'\n], function(tpl, getContainer){\n    'use stict';\n\n    /**\n     * Expose the renderer\n     * @exports taoQtiPrint/qtiPrintRenderer/renderers/interactions/Prompt\n     */\n    return {\n        qtiClass:     'prompt',\n        template:     tpl,\n        getContainer: getContainer\n    };\n});\n\n","\ndefine('tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/textEntryInteraction', ['handlebars'], function(hb){ return hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<span class=\\\"qti-interaction qti-inlineInteraction qti-textEntryInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"textEntryInteraction\\\">\\n    <input type=\\\"text\\\">\\n    <span class=\\\"response-identifier\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.responseIdentifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</span>\\n</span>\";\n  return buffer;\n  }); });\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n\n/**\n * The text entry interaction renderer\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiPrint/qtiPrintRenderer/renderers/interactions/TextEntryInteraction',[\n    'tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/textEntryInteraction',\n    'taoQtiPrint/qtiPrintRenderer/helpers/container'\n], function(tpl, getContainer){\n    'use strict';\n\n    /**\n     * Expose the renderer\n     * @exports taoQtiPrint/qtiPrintRenderer/renderers/interactions/TextEntryInteraction\n     */\n    return {\n        qtiClass:     'textEntryInteraction',\n        template:     tpl,\n        getContainer: getContainer,\n    };\n});\n\n","\ndefine('tpl!taoQtiPrint/qtiPrintRenderer/tpl/item', ['handlebars'], function(hb){ return hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \" attributes.id\";\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" \"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1));\n  return buffer;\n  }\n\n  buffer += \"<article class=\\\"qti-item tao-scope runtime\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\\n    <div\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.id), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" class=\\\"qti-itemBody\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class']), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</div>\\n</article>\";\n  return buffer;\n  }); });\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n\n/**\n * The item renderer\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiPrint/qtiPrintRenderer/renderers/Item',[\n    'tpl!taoQtiPrint/qtiPrintRenderer/tpl/item',\n    'taoQtiPrint/qtiPrintRenderer/helpers/container',\n    'taoQtiItem/qtiCommonRenderer/helpers/itemStylesheetHandler'\n], function(tpl, getContainer, itemStylesheetHandler) {\n    'use strict';\n\n    /**\n     * Expose the renderer\n     * @exports taoQtiPrint/qtiPrintRenderer/renderers/Item\n     */\n    return {\n        qtiClass:     'assessmentItem',\n        template:     tpl,\n        getContainer: getContainer,\n        /**\n         * Rendering initializations for the item\n         * @param {Object} item - the item model\n         */\n        render: function render(item) {\n            //add stylesheets\n            itemStylesheetHandler.attach(item.stylesheets);\n        },\n    };\n});\n\n","\ndefine('tpl!taoQtiPrint/qtiPrintRenderer/tpl/math', ['handlebars'], function(hb){ return hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n<span data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"math\\\">\\n    <math display = \\\"block\\\">\";\n  if (helper = helpers.raw) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.raw); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</math>\\n</span>\\n\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n<span data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"math\\\">\\n    <math>\";\n  if (helper = helpers.raw) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.raw); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</math>\\n</span>\\n\";\n  return buffer;\n  }\n\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.block), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }); });\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n\n/**\n * The math renderer\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiPrint/qtiPrintRenderer/renderers/Math',[\n    'tpl!taoQtiPrint/qtiPrintRenderer/tpl/math',\n    'taoQtiPrint/qtiPrintRenderer/helpers/container',\n    'mathJax'\n], function(tpl, getContainer, MathJax){\n    'use strict';\n\n    /**\n     * Expose the renderer\n     * @exports taoQtiPrint/qtiPrintRenderer/renderers/Math\n     */\n    return {\n        qtiClass:     'math',\n        template:     tpl,\n        getContainer: getContainer,\n        render: function(math, data){\n            if(typeof(MathJax) !== 'undefined' && MathJax){\n                _.delay(function(){//defer execution fix some rendering issue in chrome\n                    MathJax.Hub.Queue([\"Typeset\", MathJax.Hub, getContainer(math).parent()[0]]);\n                },60);\n            }\n        }\n    };\n});\n\n","\ndefine('tpl!taoQtiPrint/qtiPrintRenderer/tpl/object', ['handlebars'], function(hb){ return hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"<video \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.id), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" src=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.data)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" type=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.type)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.width), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.height), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" controls=\\\"controls\\\" preload=\\\"none\\\"></video>\";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"id=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"width=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.width)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program6(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"height=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.height)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1));\n  return buffer;\n  }\n\nfunction program8(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"<audio \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.id), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" src=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.data)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" type=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.type)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"></audio>\";\n  return buffer;\n  }\n\nfunction program10(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"<object \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.id), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" data=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.data)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" type=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.type)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.width), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.height), {hash:{},inverse:self.noop,fn:self.program(11, program11, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.alt)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</object>\";\n  return buffer;\n  }\nfunction program11(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"height=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.height)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program13(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"<iframe \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.id), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" src=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.data)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.width), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.height), {hash:{},inverse:self.noop,fn:self.program(11, program11, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.alt)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</iframe>\";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"qti-object-container\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" >\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.video), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.audio), {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.object), {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.html), {hash:{},inverse:self.noop,fn:self.program(13, program13, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</div>\";\n  return buffer;\n  }); });\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n\n/**\n * The object renderer\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiPrint/qtiPrintRenderer/renderers/Object',[\n    'tpl!taoQtiPrint/qtiPrintRenderer/tpl/object',\n    'taoQtiPrint/qtiPrintRenderer/helpers/container',\n], function(tpl, getContainer){\n    'use strict';\n\n    /**\n     * Expose the renderer\n     * @exports taoQtiPrint/qtiPrintRenderer/renderers/Object\n     */\n    return {\n        qtiClass:     'object',\n        template:     tpl,\n        getContainer: getContainer\n    };\n});\n\n","\ndefine('tpl!taoQtiPrint/qtiPrintRenderer/tpl/rubricBlock', ['handlebars'], function(hb){ return hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n<div class=\\\"grid-row qti-rubricBlock\\\" data-use=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.use)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"rubricBlock\\\">\\n    <div class=\\\"col-12\\\">\\n        <div class=\\\"qti-rubricBlock-body\\\">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</div>\\n    </div>\\n</div>\\n\";\n  return buffer;\n  }\n\n  stack1 = helpers.unless.call(depth0, (depth0 && depth0.empty), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }); });\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n\n/**\n * The rubrick block renderer\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiPrint/qtiPrintRenderer/renderers/RubricBlock',[\n    'tpl!taoQtiPrint/qtiPrintRenderer/tpl/rubricBlock',\n    'taoQtiPrint/qtiPrintRenderer/helpers/container'],\nfunction(tpl, getContainer){\n    'use strict';\n\n    /**\n     * Expose the renderer\n     * @exports taoQtiPrint/qtiPrintRenderer/renderers/RubricBlock\n     */\n    return {\n        qtiClass:     'rubricBlock',\n        getContainer: getContainer,\n        template:     tpl,\n        getData : function getData(rubric, data){\n            if(rubric.isEmpty()){\n                data.empty = true;\n            }\n            return data;\n        }\n    };\n});\n\n","\ndefine('tpl!taoQtiPrint/qtiPrintRenderer/tpl/stylesheet', ['handlebars'], function(hb){ return hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" media=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.media)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\n  buffer += \"<link\\n    href=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.href)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\\n    type=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.type)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\\n    rel=\\\"stylesheet\\\"\\n    data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.media), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n/>\";\n  return buffer;\n  }); });\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n\n/**\n * The stylesheet renderer\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiPrint/qtiPrintRenderer/renderers/Stylesheet',[\n    'tpl!taoQtiPrint/qtiPrintRenderer/tpl/stylesheet',\n    'taoQtiPrint/qtiPrintRenderer/helpers/container'],\nfunction(tpl, getContainer){\n    'use strict';\n\n    /**\n     * Expose the renderer\n     * @exports taoQtiPrint/qtiPrintRenderer/renderers/Stylesheet\n     */\n    return {\n        qtiClass:     'stylesheet',\n        template:     tpl,\n        getContainer: getContainer\n    };\n});\n\n","\ndefine('tpl!taoQtiPrint/qtiPrintRenderer/tpl/table', ['handlebars'], function(hb){ return hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" \"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1));\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"summary=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.summary)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" lang=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['xml:lang'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\n  buffer += \"<table\\n    class=\\\"qti-table\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class']), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\"\\n    data-qti-class=\\\"table\\\"\\n    data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.summary), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['xml:lang']), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    >\\n    \";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</table>\";\n  return buffer;\n  }); });\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA;\n */\ndefine('taoQtiPrint/qtiPrintRenderer/renderers/Table',[\n    'tpl!taoQtiPrint/qtiPrintRenderer/tpl/table',\n    'taoQtiPrint/qtiPrintRenderer/helpers/container'\n], function(tpl, getContainer){\n    'use strict';\n\n    /**\n     * Expose the renderer\n     * @exports taoQtiPrint/qtiPrintRenderer/renderers/Table\n     */\n    return {\n        qtiClass: 'table',\n        getContainer: getContainer,\n        template: tpl\n    };\n});\n\n","\ndefine('tpl!taoQtiPrint/qtiPrintRenderer/tpl/notYetSupported', ['handlebars'], function(hb){ return hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n    <div class=\\\"additional\\\">\\n        <div class=\\\"title\\\">Additional information:</div>\\n        <p class=\\\"info\\\">\";\n  if (helper = helpers.additional) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.additional); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</p>\\n    </div>\\n\";\n  return buffer;\n  }\n\n  buffer += \"<article class=\\\"render-error feedback-error\\\">\\n    <span class=\\\"icon-error\\\"></span>\\n    <p class=\\\"message\\\">\";\n  if (helper = helpers.message) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.message); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</p>\\n\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.additional), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</article>\";\n  return buffer;\n  }); });\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014-2017 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n */\n\n/**\n * Item Runner for printed items\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiPrint/runner/provider/qtiprint',[\n    'lodash',\n    'i18n',\n    'context',\n    'core/logger',\n    'core/promise',\n    'taoQtiItem/qtiItem/core/Loader',\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiRunner/core/Renderer',\n    'taoQtiItem/runner/provider/manager/picManager',\n    'taoQtiItem/runner/provider/manager/userModules',\n    'tpl!taoQtiPrint/qtiPrintRenderer/tpl/notYetSupported'\n], function (_, __, context, loggerFactory, Promise, QtiLoader, Element, Renderer, picManager, userModules, notYetSupportedTpl) {\n    'use strict';\n\n    var timeout = (context.timeout > 0 ? context.timeout + 1 : 30) * 1000;\n\n    var logger = loggerFactory('runner/provider/qtiPrint');\n\n    /**\n     * List the renderer's modules\n     * @type Object\n     */\n    var rendererModules = {\n        results: ['taoQtiPrint/qtiCommonRenderer/renderers/config', 'css!taoQtiPrintCss/themes/items/default/theme.css'],\n        booklet: ['taoQtiPrint/qtiPrintRenderer/renderers/config', 'css!taoQtiPrintCss/qti.css'],\n        bubbleSheet: ['taoQtiPrint/qtiPrintRenderer/renderers/config', 'css!taoQtiPrintCss/themes/items/bubble-sheet/theme.css']\n    };\n\n    /**\n     * The promise that resolves the chosen renderer\n     * @type {Promise}\n     */\n    var QtiRendererPromise = null;\n\n    /**\n     * Gets a promise that will resolve the chosen renderer\n     * @param {String} rendererType The name of the renderer to resolve\n     * @returns {Promise}\n     */\n    function getQtiRenderer(rendererType) {\n        if (!QtiRendererPromise) {\n            QtiRendererPromise = new Promise(function (resolve) {\n                require(rendererModules[rendererType], function (config) {\n                    resolve(Renderer.build(config.locations, config.name, config.options));\n                });\n            }).catch(function (err) {\n                logger.error(err);\n            });\n        }\n        return QtiRendererPromise;\n    }\n\n    /**\n     * Gets a block that displays information about unsupported content\n     * @param {Object} item\n     * @param {Object} additional\n     * @returns {String}\n     */\n    function missingSupport(item, additional) {\n        var label = item.identifier;\n        if (item.attributes && item.attributes.label) {\n            label = item.attributes.label;\n        }\n        return notYetSupportedTpl({\n            message: __(\"The item &laquo;%s&raquo; contains an interaction that is not yet supported for printing purpose\", label),\n            additional: additional\n        });\n    }\n\n    /**\n     * @exports taoQtiPrint/runner/provider/qtiprint\n     */\n    return {\n        /**\n         *\n         * @param {Object} itemData\n         * @param {Function} done\n         */\n        init: function init(itemData, done) {\n            var self = this;\n\n            getQtiRenderer(self.options.renderer).then(function (QtiRenderer) {\n                var rendererOptions = {\n                    assetManager: self.assetManager\n                };\n\n                if (self.options.themes) {\n                    rendererOptions.themes = self.options.themes;\n                }\n\n                self._loader = new QtiLoader();\n                self._renderer = new QtiRenderer(rendererOptions);\n\n                self._loader.loadItemData(itemData, function (item) {\n                    if (!item) {\n                        return self.trigger('error', 'Unable to load item from the given data.');\n                    }\n\n                    self._itemData = itemData;\n                    self._item = item;\n                    try {\n                        self._renderer.load(function () {\n                            self._item.setRenderer(this);\n\n                            done();\n                        }, this.getLoadedClasses());\n                    } catch (e) {\n                        self.trigger('error', 'Unable to render the item : ' + e);\n                    }\n                });\n            });\n        },\n\n        /**\n         *\n         * @param {HTMLElement} elt\n         * @param {Function} done\n         */\n        render: function render(elt, done) {\n            var self = this;\n            if (this._item) {\n                try {\n                    if(this.options.showResponseIdentifier){\n                        this._item.addClass('show-response-identifier');\n                    }\n                    elt.innerHTML = this._item.render({});\n                } catch (e) {\n                    logger.trace(e);\n                    elt.innerHTML = missingSupport(this._itemData, e);\n                    self.trigger('warning', 'Error in template rendering : ' + e);\n                }\n                try {\n                    // Race between postRendering and timeout\n                    // postRendering waits for everything to be resolved or one reject\n                    Promise\n                        .race([\n                            Promise.all(this._item.postRender()),\n                            new Promise(function (resolve, reject) {\n                                _.delay(reject, timeout, new Error('Post rendering ran out of time in item ' + self._itemData.serial));\n                            })\n                        ])\n                        .then(function () {\n                            /**\n                             * Lists the PIC provided by this item.\n                             * @event qti#listpic\n                             */\n                            self.trigger('listpic', picManager.collection(self._item));\n\n                            return userModules.load().then(done);\n                        })\n                        .catch(function (err) {\n                            self.trigger('error', 'Error in post rendering : ' + err instanceof Error ? err.message : err);\n                            done();\n                        });\n\n                } catch (e) {\n                    self.trigger('error', 'Error in post rendering : ' + e);\n                    done();\n                }\n            } else {\n                done();\n            }\n        },\n\n        /**\n         *\n         * @param {HTMLElement} elt\n         * @param {Function} done\n         */\n        clear: function clear(elt, done) {\n            done();\n        },\n\n        /**\n         *\n         * @returns {Object}\n         */\n        getState: function getState() {\n            return {};\n        },\n\n        /**\n         *\n         * @param {Object} state\n         */\n        setState: function setState(state) {\n            if (this._item && state) {\n\n                //set interaction state\n                _.forEach(this._item.getInteractions(), function (interaction) {\n                    var id = interaction.attr('responseIdentifier');\n                    if (id && state[id]) {\n                        interaction.setState(state[id]);\n                    }\n                });\n\n                //set info control state\n                if (state.pic) {\n                    _.forEach(this._item.getElements(), function (element) {\n                        if (Element.isA(element, 'infoControl') && state.pic[element.attr('id')]) {\n                            element.setState(state.pic[element.attr('id')]);\n                        }\n                    });\n                }\n            }\n        },\n\n        /**\n         *\n         * @returns {Array}\n         */\n        getResponses: function getResponses() {\n            return [];\n        }\n    };\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n *\n */\n\n/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiPrint/runner/itemRunner',[\n    'taoItems/runner/api/itemRunner',\n    'taoQtiPrint/runner/provider/qtiprint'\n], function(itemRunner, qtiRuntimeProvider){\n    'use strict';\n\n    //register the QTI Provider\n    itemRunner.register('qtiprint', qtiRuntimeProvider);\n\n    /**\n     * Expose the itemRunner with the QTI provider registered\n     * @exports taoQtiPrint/runner/itemRunner\n     */\n    return itemRunner;\n});\n\n","\ndefine('tpl!taoQtiPrint/runner/tpl/pageTest', ['handlebars'], function(hb){ return hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"<h3>\";\n  if (helper = helpers.uniqid) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.uniqid); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</h3>\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"<div class=\\\"logo\\\">\\n        <img src=\\\"\";\n  if (helper = helpers.logo) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.logo); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" alt=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Logo\", options) : helperMissing.call(depth0, \"__\", \"Logo\", options)))\n    + \"\\\" />\\n    </div>\";\n  return buffer;\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"<h1>\";\n  if (helper = helpers.title) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.title); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</h1>\";\n  return buffer;\n  }\n\nfunction program7(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"<h2>\";\n  if (helper = helpers.subtitle) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.subtitle); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</h2>\";\n  return buffer;\n  }\n\nfunction program9(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"<h3>\";\n  if (helper = helpers.date) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.date); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</h3>\";\n  return buffer;\n  }\n\nfunction program11(depth0,data) {\n  \n  \n  return \"<div class=\\\"qr-code\\\"></div>\";\n  }\n\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.uniqid), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.logo), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.title), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.subtitle), {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.date), {hash:{},inverse:self.noop,fn:self.program(9, program9, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.qrcode), {hash:{},inverse:self.noop,fn:self.program(11, program11, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }); });\n","\ndefine('tpl!taoQtiPrint/runner/tpl/pageSection', ['handlebars'], function(hb){ return hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n<div>\";\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</div>\\n\";\n  return buffer;\n  }\n\n  buffer += \"<h2>\";\n  if (helper = helpers.title) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.title); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</h2>\\n\";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.rubricBlock), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }); });\n","\ndefine('tpl!taoQtiPrint/runner/tpl/pageBlock', ['handlebars'], function(hb){ return hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<section class=\\\"grid-row \";\n  if (helper = helpers.type) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.type); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"></section>\";\n  return buffer;\n  }); });\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2017 (original work) Open Assessment Technologies SA;\n */\n\n/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n * @author Jean-Sbastien Conan <jean-sebastien@taotesting.com>\n */\ndefine('taoQtiPrint/runner/testRenderers',[\n    'jquery',\n    'lodash',\n    'util/url',\n    'taoQtiPrint/runner/itemRunner',\n    'taoItems/assets/strategies',\n    'taoQtiPrint/lib/qrcode',\n    'tpl!taoQtiPrint/runner/tpl/pageTest',\n    'tpl!taoQtiPrint/runner/tpl/pageSection',\n    'tpl!taoQtiPrint/runner/tpl/pageBlock'\n], function ($, _, urlHelper, itemRunner, assetStrategies, QRCode, pageTestTpl, pageSectionTpl) {\n    'use strict';\n\n    /**\n     * Defines renderers for each blocks in the printed test\n     * @typedef {testRenderers}\n     */\n    return {\n        /**\n         * Renders a block that represents a cover page\n         * @param {jQuery} $container - The container in which renders the block\n         * @param {Object} test - The test definition\n         * @param {Object} options - The print options\n         * @param {Function} done - A callback to call when the block is fully rendered\n         */\n        testPage: function testPage($container, test, options, done) {\n            var coverPageOptions = (options && options.cover_page) || {};\n\n            $(\n                pageTestTpl({\n                    title: coverPageOptions['title'] && test.title,\n                    subtitle: coverPageOptions['description'] && options.description,\n                    qrcode: coverPageOptions['qr_code'],\n                    logo: coverPageOptions['logo'] && options.logo,\n                    date: coverPageOptions['date'] && options.date,\n                    uniqid: coverPageOptions['unique_id'] && options.unique_id\n                })\n            ).appendTo($container);\n\n            if (coverPageOptions['qr_code']) {\n                const text =\n                    coverPageOptions['qr_code_data'] ||\n                    urlHelper.route('render', 'PrintTest', 'taoBooklet', { uri: options.uri });\n                new QRCode($('.qr-code', $container).get(0), {\n                    text: text.length > 192 && text.length < 220 ? text.padEnd(220) : text,\n                    width: 256,\n                    height: 256,\n                    colorDark: '#000000',\n                    colorLight: '#ffffff',\n                    correctLevel: QRCode.CorrectLevel.H\n                });\n            }\n\n            done();\n        },\n\n        /**\n         * Renders a block that represents a section of the test\n         * @param {jQuery} $container - The container in which renders the block\n         * @param {Object} section - The section definition\n         * @param {Function} done - A callback to call when the block is fully rendered\n         */\n        sectionPage: function sectionPage($container, section, done) {\n            $(\n                pageSectionTpl({\n                    title: section.title,\n                    rubricBlock: section.rubricBlock\n                })\n            ).appendTo($container);\n\n            done();\n        },\n\n        /**\n         * Renders a block that represents an item of the test\n         * @param {jQuery} $container - The container in which renders the block\n         * @param {Object} itemRef - The item definition\n         * @param {Object} itemState - The responses of the item\n         * @param {String} uri - The URI of the item\n         * @param {Function} done - A callback to call when the block is fully rendered\n         */\n        itemPage: function itemPage($container, itemRef, itemState, uri, done) {\n            var item = itemRef.data;\n            var assets = itemRef.assets;\n            var baseUrl =\n                itemRef.baseUrl ||\n                urlHelper.route('getFile', 'QtiCreator', 'taoQtiItem', {\n                    uri: uri,\n                    lang: 'en-US'\n                }) + '&relPath=';\n            var isDone = false;\n\n            /**\n             * @param [err]\n             */\n            function itemDone(err) {\n                if (!isDone) {\n                    isDone = true;\n                    done(err);\n                }\n            }\n\n            itemRunner('qtiprint', item, {\n                renderer: itemRef.renderer,\n                showResponseIdentifier: itemRef.showResponseIdentifier\n            })\n                .on('error', function (err) {\n                    itemDone(err);\n                })\n                .on('init', function () {\n                    if (itemState && _.isPlainObject(itemState)) {\n                        this.setState(itemState);\n                    }\n                    this.render($container);\n                })\n                .on('ready', function () {\n                    itemDone();\n                })\n                .assets(\n                    [\n                        {\n                            name: 'base64package',\n                            handle: function handleBase64(url) {\n                                var id = url.file;\n                                var found = _.find(assets, function (assetsList) {\n                                    var asset = assetsList[id];\n                                    return !!(asset && urlHelper.isBase64(asset));\n                                });\n                                if (found) {\n                                    return found[id];\n                                }\n                            }\n                        },\n                        assetStrategies.taomedia,\n                        assetStrategies.external,\n                        assetStrategies.baseUrl\n                    ],\n                    {\n                        baseUrl: baseUrl\n                    }\n                )\n                .init();\n        }\n    };\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015-2017 (original work) Open Assessment Technologies SA;\n */\n\n/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiPrint/runner/testRunner',[\n    'jquery',\n    'lodash',\n    'async',\n    'core/eventifier',\n    'taoQtiPrint/runner/testRenderers',\n    'tpl!taoQtiPrint/runner/tpl/pageBlock'\n], function ($,\n             _,\n             asyncLib,\n             eventifier,\n             testRenderers,\n             pageBlockTpl) {\n    'use strict';\n\n    /**\n     *\n     * Builds a brand new {@link TestRunner}.\n     *\n     * <strong>The factory is an internal mechanism to create encapsulated contexts.\n     *  I suggest you to use directly the name <i>testRunner</i> when you require this module.</strong>\n     *\n     *\n     * @exports testRunner\n     * @namespace testRunnerFactory\n     *\n     *\n     * @returns {testRunner}\n     */\n    var testRunnerFactory = function testRunnerFactory(testDefinitions, options) {\n        var layoutOptions = options && options.layout || {};\n        var $container;\n\n        /**\n         * Creates a container for a test block\n         * @param {String} type\n         * @returns {jQuery}\n         */\n        function createPage(type) {\n            var $pageBlock = $(pageBlockTpl({type: type}));\n            $container.append($pageBlock);\n            return $pageBlock;\n        }\n\n        if (!testDefinitions) {\n            throw new Error('Invalid test data structure');\n        }\n\n        if (!_.isArray(testDefinitions)) {\n            testDefinitions = [testDefinitions];\n        }\n\n        _.forEach(testDefinitions, function(testDefinition) {\n            if (!testDefinition) {\n                throw new Error('Invalid test data structure: definition is empty');\n            }\n            if (!testDefinition.data) {\n                throw new Error('Invalid test data structure: data is missing');\n            }\n            if (!testDefinition.items) {\n                throw new Error('Invalid test data structure: items is missing');\n            }\n        });\n\n        /**\n         * @typedef {testRunner}\n         */\n        return eventifier({\n            /**\n             * Makes the rendering of the full test.\n             *\n             * @param {HTMLElement|jQueryElement} elt - the DOM element that is going to contain the rendered test.\n             * @returns {testRunner} to chain calls\n             *\n             * @fires testRunner#ready\n             * @fires testRunner#render\n             * @fires testRunner#error if the elt isn't valid\n             */\n            render: function render(elt) {\n                var self = this;\n                var pageRenderers = [];\n\n                //check elt\n                if (!(elt instanceof HTMLElement) && !(elt instanceof $)) {\n                    return self.trigger('error', 'A valid HTMLElement (or a jquery element) at least is required to render the test');\n                }\n\n                //we keep a reference to the container\n                if (elt instanceof $) {\n                    $container = elt;\n                } else {\n                    $container = $(elt);\n                }\n                $container.empty();\n\n                //dummy rtl support from options\n                if (options && options.rtl === true) {\n                    $container.addClass('rtl').attr('dir', 'rtl');\n                }\n\n                //Build the pageRenderers array that contains each page to render\n                //Transform the functions of the renderer to fit the format required by async (partial with data and binding)\n                _.forEach(testDefinitions, function(testDefinition) {\n                    var testData = testDefinition.data || {};\n                    var items = testDefinition.items || {};\n                    var states = testDefinition.states || {};\n\n                    if (layoutOptions['cover_page']) {\n                        pageRenderers.push(\n                            _.partial(testRenderers.testPage, createPage('title'), testData, options)\n                        );\n                    }\n\n                    _.forEach(testData.testParts, function (testPart) {\n                        _.forEach(testPart.sections, function (section) {\n                            pageRenderers.push(\n                                _.partial(testRenderers.sectionPage, createPage('section'), section)\n                            );\n\n                            _.forEach(section.items, function (item) {\n                                var itemRef = items[item.href];\n                                var itemState = states[item.href];\n\n                                if (itemRef && itemRef.data) {\n                                    itemRef.renderer = 'booklet';\n\n                                    if(options.regular) {\n                                        itemRef.renderer = 'results';\n                                    }\n                                    else if(options.layout && options.layout.use_bubble_sheet) {\n                                        itemRef.renderer = 'bubbleSheet';\n                                    }\n\n                                    if(options && options.layout && options.layout.show_response_identifier){\n                                        itemRef.showResponseIdentifier = true;\n                                    }\n                                    pageRenderers.push(\n                                        _.partial(testRenderers.itemPage, createPage('item'), itemRef, itemState, item.href)\n                                    );\n                                }\n                            });\n                        });\n                    });\n                });\n\n                //then we call all the renderers in parallel\n                asyncLib.parallel(pageRenderers, function renderingDone(err) {\n                    if (err) {\n                        self.trigger('error', 'An error occurred while rendering a page :  ' + err);\n                    }\n\n                    /**\n                     * The test is rendered\n                     * @event TestRunner#render\n                     */\n                    self.trigger('render');\n\n                    /**\n                     * The test is ready.\n                     * Alias of {@link TestRunner#render}\n                     * @event TestRunner#ready\n                     */\n                    self.trigger('ready');\n                });\n\n                return this;\n            },\n\n            /**\n             * Clears the running test.\n             * @returns {testRunner}\n             *\n             * @fires testRunner#clear\n             */\n            clear: function clear() {\n\n                $container.empty();\n\n                /**\n                 * The test is ready.\n                 * @event TestRunner#clear\n                 */\n                this.trigger('clear');\n\n                return this;\n            }\n        });\n    };\n\n    return testRunnerFactory;\n});\n\n","\ndefine(\"taoQtiPrint/loader/taoQtiPrint.bundle\", function(){});\n","define(\"taoQtiPrint/loader/taoQtiPrint.min\", [\"taoItems/loader/taoItems.min\",\"taoQtiItem/loader/taoQtiItem.min\"], function(){});\n"]}